.include "macros.inc"

.section .text, "ax"  # 0x80039220 - 0x804F5900

.balign 16, 0
.fn ProbeBarnacle, global
/* 803159F0 002DEFB0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803159F4 002DEFB4  7C 08 02 A6 */	mflr r0
/* 803159F8 002DEFB8  2C 03 00 02 */	cmpwi r3, 2
/* 803159FC 002DEFBC  90 01 00 24 */	stw r0, 0x24(r1)
/* 80315A00 002DEFC0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80315A04 002DEFC4  7C BF 2B 78 */	mr r31, r5
/* 80315A08 002DEFC8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80315A0C 002DEFCC  7C 9E 23 78 */	mr r30, r4
/* 80315A10 002DEFD0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80315A14 002DEFD4  7C 7D 1B 78 */	mr r29, r3
/* 80315A18 002DEFD8  93 81 00 10 */	stw r28, 0x10(r1)
/* 80315A1C 002DEFDC  41 82 00 24 */	beq .L_80315A40
/* 80315A20 002DEFE0  2C 04 00 00 */	cmpwi r4, 0
/* 80315A24 002DEFE4  40 82 00 1C */	bne .L_80315A40
/* 80315A28 002DEFE8  38 80 00 00 */	li r4, 0
/* 80315A2C 002DEFEC  4B FF F0 75 */	bl EXIAttach
/* 80315A30 002DEFF0  2C 03 00 00 */	cmpwi r3, 0
/* 80315A34 002DEFF4  40 82 00 0C */	bne .L_80315A40
/* 80315A38 002DEFF8  38 60 00 00 */	li r3, 0
/* 80315A3C 002DEFFC  48 00 01 0C */	b .L_80315B48
.L_80315A40:
/* 80315A40 002DF000  7F A3 EB 78 */	mr r3, r29
/* 80315A44 002DF004  7F C4 F3 78 */	mr r4, r30
/* 80315A48 002DF008  38 A0 00 00 */	li r5, 0
/* 80315A4C 002DF00C  4B FF F9 E5 */	bl EXILock
/* 80315A50 002DF010  7C 60 00 34 */	cntlzw r0, r3
/* 80315A54 002DF014  54 1C D9 7F */	rlwinm. r28, r0, 0x1b, 5, 0x1f
/* 80315A58 002DF018  40 82 00 B4 */	bne .L_80315B0C
/* 80315A5C 002DF01C  7F A3 EB 78 */	mr r3, r29
/* 80315A60 002DF020  7F C4 F3 78 */	mr r4, r30
/* 80315A64 002DF024  38 A0 00 00 */	li r5, 0
/* 80315A68 002DF028  4B FF F2 19 */	bl EXISelect
/* 80315A6C 002DF02C  7C 60 00 34 */	cntlzw r0, r3
/* 80315A70 002DF030  54 1C D9 7F */	rlwinm. r28, r0, 0x1b, 5, 0x1f
/* 80315A74 002DF034  40 82 00 90 */	bne .L_80315B04
/* 80315A78 002DF038  3C 80 20 01 */	lis r4, 0x20011300@ha
/* 80315A7C 002DF03C  7F A3 EB 78 */	mr r3, r29
/* 80315A80 002DF040  38 04 13 00 */	addi r0, r4, 0x20011300@l
/* 80315A84 002DF044  90 01 00 08 */	stw r0, 8(r1)
/* 80315A88 002DF048  38 81 00 08 */	addi r4, r1, 8
/* 80315A8C 002DF04C  38 A0 00 04 */	li r5, 4
/* 80315A90 002DF050  38 C0 00 01 */	li r6, 1
/* 80315A94 002DF054  38 E0 00 00 */	li r7, 0
/* 80315A98 002DF058  4B FF E7 49 */	bl EXIImm
/* 80315A9C 002DF05C  7C 60 00 34 */	cntlzw r0, r3
/* 80315AA0 002DF060  7F A3 EB 78 */	mr r3, r29
/* 80315AA4 002DF064  54 1C D9 7E */	srwi r28, r0, 5
/* 80315AA8 002DF068  4B FF EB 69 */	bl EXISync
/* 80315AAC 002DF06C  7C 60 00 34 */	cntlzw r0, r3
/* 80315AB0 002DF070  7F A3 EB 78 */	mr r3, r29
/* 80315AB4 002DF074  54 00 D9 7E */	srwi r0, r0, 5
/* 80315AB8 002DF078  7F E4 FB 78 */	mr r4, r31
/* 80315ABC 002DF07C  7F 9C 03 78 */	or r28, r28, r0
/* 80315AC0 002DF080  38 A0 00 04 */	li r5, 4
/* 80315AC4 002DF084  38 C0 00 00 */	li r6, 0
/* 80315AC8 002DF088  38 E0 00 00 */	li r7, 0
/* 80315ACC 002DF08C  4B FF E7 15 */	bl EXIImm
/* 80315AD0 002DF090  7C 60 00 34 */	cntlzw r0, r3
/* 80315AD4 002DF094  7F A3 EB 78 */	mr r3, r29
/* 80315AD8 002DF098  54 00 D9 7E */	srwi r0, r0, 5
/* 80315ADC 002DF09C  7F 9C 03 78 */	or r28, r28, r0
/* 80315AE0 002DF0A0  4B FF EB 31 */	bl EXISync
/* 80315AE4 002DF0A4  7C 60 00 34 */	cntlzw r0, r3
/* 80315AE8 002DF0A8  7F A3 EB 78 */	mr r3, r29
/* 80315AEC 002DF0AC  54 00 D9 7E */	srwi r0, r0, 5
/* 80315AF0 002DF0B0  7F 9C 03 78 */	or r28, r28, r0
/* 80315AF4 002DF0B4  4B FF F2 BD */	bl EXIDeselect
/* 80315AF8 002DF0B8  7C 60 00 34 */	cntlzw r0, r3
/* 80315AFC 002DF0BC  54 00 D9 7E */	srwi r0, r0, 5
/* 80315B00 002DF0C0  7F 9C 03 78 */	or r28, r28, r0
.L_80315B04:
/* 80315B04 002DF0C4  7F A3 EB 78 */	mr r3, r29
/* 80315B08 002DF0C8  4B FF FA 29 */	bl EXIUnlock
.L_80315B0C:
/* 80315B0C 002DF0CC  2C 1D 00 02 */	cmpwi r29, 2
/* 80315B10 002DF0D0  41 82 00 14 */	beq .L_80315B24
/* 80315B14 002DF0D4  2C 1E 00 00 */	cmpwi r30, 0
/* 80315B18 002DF0D8  40 82 00 0C */	bne .L_80315B24
/* 80315B1C 002DF0DC  7F A3 EB 78 */	mr r3, r29
/* 80315B20 002DF0E0  4B FF F0 A1 */	bl EXIDetach
.L_80315B24:
/* 80315B24 002DF0E4  2C 1C 00 00 */	cmpwi r28, 0
/* 80315B28 002DF0E8  41 82 00 0C */	beq .L_80315B34
/* 80315B2C 002DF0EC  38 60 00 00 */	li r3, 0
/* 80315B30 002DF0F0  48 00 00 18 */	b .L_80315B48
.L_80315B34:
/* 80315B34 002DF0F4  80 9F 00 00 */	lwz r4, 0(r31)
/* 80315B38 002DF0F8  20 64 FF FF */	subfic r3, r4, -1
/* 80315B3C 002DF0FC  38 04 00 01 */	addi r0, r4, 1
/* 80315B40 002DF100  7C 60 03 78 */	or r0, r3, r0
/* 80315B44 002DF104  54 03 0F FE */	srwi r3, r0, 0x1f
.L_80315B48:
/* 80315B48 002DF108  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80315B4C 002DF10C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80315B50 002DF110  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80315B54 002DF114  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80315B58 002DF118  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80315B5C 002DF11C  7C 08 03 A6 */	mtlr r0
/* 80315B60 002DF120  38 21 00 20 */	addi r1, r1, 0x20
/* 80315B64 002DF124  4E 80 00 20 */	blr 
.endfn ProbeBarnacle

.balign 16, 0
.fn __OSEnableBarnacle, global
/* 80315B70 002DF130  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80315B74 002DF134  7C 08 02 A6 */	mflr r0
/* 80315B78 002DF138  90 01 00 24 */	stw r0, 0x24(r1)
/* 80315B7C 002DF13C  38 A1 00 08 */	addi r5, r1, 8
/* 80315B80 002DF140  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80315B84 002DF144  7C 9F 23 78 */	mr r31, r4
/* 80315B88 002DF148  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80315B8C 002DF14C  7C 7E 1B 78 */	mr r30, r3
/* 80315B90 002DF150  4B FF FA B1 */	bl EXIGetID
/* 80315B94 002DF154  2C 03 00 00 */	cmpwi r3, 0
/* 80315B98 002DF158  41 82 01 7C */	beq .L_80315D14
/* 80315B9C 002DF15C  80 81 00 08 */	lwz r4, 8(r1)
/* 80315BA0 002DF160  3C 00 01 02 */	lis r0, 0x102
/* 80315BA4 002DF164  7C 04 00 00 */	cmpw r4, r0
/* 80315BA8 002DF168  41 82 01 6C */	beq .L_80315D14
/* 80315BAC 002DF16C  40 80 00 94 */	bge .L_80315C40
/* 80315BB0 002DF170  2C 04 00 04 */	cmpwi r4, 4
/* 80315BB4 002DF174  41 82 01 60 */	beq .L_80315D14
/* 80315BB8 002DF178  40 80 00 54 */	bge .L_80315C0C
/* 80315BBC 002DF17C  3C 60 80 00 */	lis r3, 0x80000010@ha
/* 80315BC0 002DF180  38 03 00 10 */	addi r0, r3, 0x80000010@l
/* 80315BC4 002DF184  7C 04 00 00 */	cmpw r4, r0
/* 80315BC8 002DF188  41 82 01 4C */	beq .L_80315D14
/* 80315BCC 002DF18C  40 80 00 24 */	bge .L_80315BF0
/* 80315BD0 002DF190  38 03 00 08 */	addi r0, r3, 8
/* 80315BD4 002DF194  7C 04 00 00 */	cmpw r4, r0
/* 80315BD8 002DF198  41 82 01 3C */	beq .L_80315D14
/* 80315BDC 002DF19C  40 80 01 08 */	bge .L_80315CE4
/* 80315BE0 002DF1A0  38 03 00 04 */	addi r0, r3, 4
/* 80315BE4 002DF1A4  7C 04 00 00 */	cmpw r4, r0
/* 80315BE8 002DF1A8  41 82 01 2C */	beq .L_80315D14
/* 80315BEC 002DF1AC  48 00 00 F8 */	b .L_80315CE4
.L_80315BF0:
/* 80315BF0 002DF1B0  2C 04 FF FF */	cmpwi r4, -1
/* 80315BF4 002DF1B4  41 82 01 20 */	beq .L_80315D14
/* 80315BF8 002DF1B8  40 80 00 EC */	bge .L_80315CE4
/* 80315BFC 002DF1BC  38 03 00 20 */	addi r0, r3, 0x20
/* 80315C00 002DF1C0  7C 04 00 00 */	cmpw r4, r0
/* 80315C04 002DF1C4  41 82 01 10 */	beq .L_80315D14
/* 80315C08 002DF1C8  48 00 00 DC */	b .L_80315CE4
.L_80315C0C:
/* 80315C0C 002DF1CC  2C 04 00 20 */	cmpwi r4, 0x20
/* 80315C10 002DF1D0  41 82 01 04 */	beq .L_80315D14
/* 80315C14 002DF1D4  40 80 00 1C */	bge .L_80315C30
/* 80315C18 002DF1D8  2C 04 00 10 */	cmpwi r4, 0x10
/* 80315C1C 002DF1DC  41 82 00 F8 */	beq .L_80315D14
/* 80315C20 002DF1E0  40 80 00 C4 */	bge .L_80315CE4
/* 80315C24 002DF1E4  2C 04 00 08 */	cmpwi r4, 8
/* 80315C28 002DF1E8  41 82 00 EC */	beq .L_80315D14
/* 80315C2C 002DF1EC  48 00 00 B8 */	b .L_80315CE4
.L_80315C30:
/* 80315C30 002DF1F0  3C 00 01 01 */	lis r0, 0x101
/* 80315C34 002DF1F4  7C 04 00 00 */	cmpw r4, r0
/* 80315C38 002DF1F8  41 82 00 DC */	beq .L_80315D14
/* 80315C3C 002DF1FC  48 00 00 A8 */	b .L_80315CE4
.L_80315C40:
/* 80315C40 002DF200  3C 60 04 04 */	lis r3, 0x04040404@ha
/* 80315C44 002DF204  38 03 04 04 */	addi r0, r3, 0x04040404@l
/* 80315C48 002DF208  7C 04 00 00 */	cmpw r4, r0
/* 80315C4C 002DF20C  41 82 00 C8 */	beq .L_80315D14
/* 80315C50 002DF210  40 80 00 58 */	bge .L_80315CA8
/* 80315C54 002DF214  3C 60 04 02 */	lis r3, 0x04020100@ha
/* 80315C58 002DF218  38 03 01 00 */	addi r0, r3, 0x04020100@l
/* 80315C5C 002DF21C  7C 04 00 00 */	cmpw r4, r0
/* 80315C60 002DF220  41 82 00 B4 */	beq .L_80315D14
/* 80315C64 002DF224  40 80 00 24 */	bge .L_80315C88
/* 80315C68 002DF228  3C 00 03 01 */	lis r0, 0x301
/* 80315C6C 002DF22C  7C 04 00 00 */	cmpw r4, r0
/* 80315C70 002DF230  41 82 00 A4 */	beq .L_80315D14
/* 80315C74 002DF234  40 80 00 70 */	bge .L_80315CE4
/* 80315C78 002DF238  3C 00 02 02 */	lis r0, 0x202
/* 80315C7C 002DF23C  7C 04 00 00 */	cmpw r4, r0
/* 80315C80 002DF240  41 82 00 94 */	beq .L_80315D14
/* 80315C84 002DF244  48 00 00 60 */	b .L_80315CE4
.L_80315C88:
/* 80315C88 002DF248  38 03 03 00 */	addi r0, r3, 0x300
/* 80315C8C 002DF24C  7C 04 00 00 */	cmpw r4, r0
/* 80315C90 002DF250  41 82 00 84 */	beq .L_80315D14
/* 80315C94 002DF254  40 80 00 50 */	bge .L_80315CE4
/* 80315C98 002DF258  38 03 02 00 */	addi r0, r3, 0x200
/* 80315C9C 002DF25C  7C 04 00 00 */	cmpw r4, r0
/* 80315CA0 002DF260  41 82 00 74 */	beq .L_80315D14
/* 80315CA4 002DF264  48 00 00 40 */	b .L_80315CE4
.L_80315CA8:
/* 80315CA8 002DF268  3C 00 04 13 */	lis r0, 0x413
/* 80315CAC 002DF26C  7C 04 00 00 */	cmpw r4, r0
/* 80315CB0 002DF270  41 82 00 64 */	beq .L_80315D14
/* 80315CB4 002DF274  40 80 00 24 */	bge .L_80315CD8
/* 80315CB8 002DF278  3C 00 04 12 */	lis r0, 0x412
/* 80315CBC 002DF27C  7C 04 00 00 */	cmpw r4, r0
/* 80315CC0 002DF280  41 82 00 54 */	beq .L_80315D14
/* 80315CC4 002DF284  40 80 00 20 */	bge .L_80315CE4
/* 80315CC8 002DF288  3C 00 04 06 */	lis r0, 0x406
/* 80315CCC 002DF28C  7C 04 00 00 */	cmpw r4, r0
/* 80315CD0 002DF290  41 82 00 44 */	beq .L_80315D14
/* 80315CD4 002DF294  48 00 00 10 */	b .L_80315CE4
.L_80315CD8:
/* 80315CD8 002DF298  3C 00 04 22 */	lis r0, 0x422
/* 80315CDC 002DF29C  7C 04 00 00 */	cmpw r4, r0
/* 80315CE0 002DF2A0  41 82 00 34 */	beq .L_80315D14
.L_80315CE4:
/* 80315CE4 002DF2A4  7F C3 F3 78 */	mr r3, r30
/* 80315CE8 002DF2A8  7F E4 FB 78 */	mr r4, r31
/* 80315CEC 002DF2AC  38 A1 00 08 */	addi r5, r1, 8
/* 80315CF0 002DF2B0  4B FF FD 01 */	bl ProbeBarnacle
/* 80315CF4 002DF2B4  2C 03 00 00 */	cmpwi r3, 0
/* 80315CF8 002DF2B8  41 82 00 1C */	beq .L_80315D14
/* 80315CFC 002DF2BC  3C 60 A5 FF */	lis r3, 0xA5FF005A@ha
/* 80315D00 002DF2C0  93 CD B7 6C */	stw r30, Chan@sda21(r13)
/* 80315D04 002DF2C4  38 03 00 5A */	addi r0, r3, 0xA5FF005A@l
/* 80315D08 002DF2C8  93 ED B7 68 */	stw r31, Dev@sda21(r13)
/* 80315D0C 002DF2CC  90 0D B7 64 */	stw r0, BarnacleEnabled@sda21(r13)
/* 80315D10 002DF2D0  90 0D B7 60 */	stw r0, Enabled@sda21(r13)
.L_80315D14:
/* 80315D14 002DF2D4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80315D18 002DF2D8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80315D1C 002DF2DC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80315D20 002DF2E0  7C 08 03 A6 */	mtlr r0
/* 80315D24 002DF2E4  38 21 00 20 */	addi r1, r1, 0x20
/* 80315D28 002DF2E8  4E 80 00 20 */	blr 
.endfn __OSEnableBarnacle

.section .sbss, "wa"  # 0x80666600 - 0x8066836F

Enabled:
	.skip 0x4

BarnacleEnabled:
	.skip 0x4

Dev:
	.skip 0x4

Chan:
	.skip 0x4