.include "macros.inc"

.section .text, "ax"  # 0x80039220 - 0x804F5900

.fn BTM_PmRegister, global
/* 802E9EC0 002B3480  54 60 07 7B */	rlwinm. r0, r3, 0, 0x1d, 0x1d
/* 802E9EC4 002B3484  41 82 00 38 */	beq .L_802E9EFC
/* 802E9EC8 002B3488  88 04 00 00 */	lbz r0, 0(r4)
/* 802E9ECC 002B348C  28 00 00 02 */	cmplwi r0, 2
/* 802E9ED0 002B3490  41 80 00 0C */	blt .L_802E9EDC
/* 802E9ED4 002B3494  38 60 00 05 */	li r3, 5
/* 802E9ED8 002B3498  4E 80 00 20 */	blr
.L_802E9EDC:
/* 802E9EDC 002B349C  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802E9EE0 002B34A0  54 00 1D 78 */	rlwinm r0, r0, 3, 0x15, 0x1c
/* 802E9EE4 002B34A4  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802E9EE8 002B34A8  38 A0 00 00 */	li r5, 0
/* 802E9EEC 002B34AC  7C 83 02 14 */	add r4, r3, r0
/* 802E9EF0 002B34B0  98 A4 05 58 */	stb r5, 0x558(r4)
/* 802E9EF4 002B34B4  38 60 00 00 */	li r3, 0
/* 802E9EF8 002B34B8  4E 80 00 20 */	blr
.L_802E9EFC:
/* 802E9EFC 002B34BC  3C C0 80 5C */	lis r6, btm_cb@ha
/* 802E9F00 002B34C0  38 00 00 02 */	li r0, 2
/* 802E9F04 002B34C4  38 C6 F9 F8 */	addi r6, r6, btm_cb@l
/* 802E9F08 002B34C8  38 E0 00 00 */	li r7, 0
/* 802E9F0C 002B34CC  7C 09 03 A6 */	mtctr r0
.L_802E9F10:
/* 802E9F10 002B34D0  88 06 05 58 */	lbz r0, 0x558(r6)
/* 802E9F14 002B34D4  2C 00 00 00 */	cmpwi r0, 0
/* 802E9F18 002B34D8  40 82 00 50 */	bne .L_802E9F68
/* 802E9F1C 002B34DC  54 60 07 BD */	rlwinm. r0, r3, 0, 0x1e, 0x1e
/* 802E9F20 002B34E0  41 82 00 28 */	beq .L_802E9F48
/* 802E9F24 002B34E4  2C 05 00 00 */	cmpwi r5, 0
/* 802E9F28 002B34E8  40 82 00 0C */	bne .L_802E9F34
/* 802E9F2C 002B34EC  38 60 00 05 */	li r3, 5
/* 802E9F30 002B34F0  4E 80 00 20 */	blr
.L_802E9F34:
/* 802E9F34 002B34F4  3C C0 80 5C */	lis r6, btm_cb@ha
/* 802E9F38 002B34F8  54 E0 18 38 */	slwi r0, r7, 3
/* 802E9F3C 002B34FC  38 C6 F9 F8 */	addi r6, r6, btm_cb@l
/* 802E9F40 002B3500  7C C6 02 14 */	add r6, r6, r0
/* 802E9F44 002B3504  90 A6 05 54 */	stw r5, 0x554(r6)
.L_802E9F48:
/* 802E9F48 002B3508  3C A0 80 5C */	lis r5, btm_cb@ha
/* 802E9F4C 002B350C  54 E0 18 38 */	slwi r0, r7, 3
/* 802E9F50 002B3510  38 A5 F9 F8 */	addi r5, r5, btm_cb@l
/* 802E9F54 002B3514  7C A5 02 14 */	add r5, r5, r0
/* 802E9F58 002B3518  98 65 05 58 */	stb r3, 0x558(r5)
/* 802E9F5C 002B351C  38 60 00 00 */	li r3, 0
/* 802E9F60 002B3520  98 E4 00 00 */	stb r7, 0(r4)
/* 802E9F64 002B3524  4E 80 00 20 */	blr
.L_802E9F68:
/* 802E9F68 002B3528  38 C6 00 08 */	addi r6, r6, 8
/* 802E9F6C 002B352C  38 E7 00 01 */	addi r7, r7, 1
/* 802E9F70 002B3530  42 00 FF A0 */	bdnz .L_802E9F10
/* 802E9F74 002B3534  38 60 00 03 */	li r3, 3
/* 802E9F78 002B3538  4E 80 00 20 */	blr 
.endfn BTM_PmRegister

.fn BTM_SetPowerMode, global
/* 802E9F7C 002B353C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802E9F80 002B3540  7C 08 02 A6 */	mflr r0
/* 802E9F84 002B3544  90 01 00 24 */	stw r0, 0x24(r1)
/* 802E9F88 002B3548  39 61 00 20 */	addi r11, r1, 0x20
/* 802E9F8C 002B354C  4B FD 01 C5 */	bl _savegpr_26
/* 802E9F90 002B3550  28 03 00 02 */	cmplwi r3, 2
/* 802E9F94 002B3554  7C 7B 1B 78 */	mr r27, r3
/* 802E9F98 002B3558  7C 9A 23 78 */	mr r26, r4
/* 802E9F9C 002B355C  7C BC 2B 78 */	mr r28, r5
/* 802E9FA0 002B3560  41 80 00 08 */	blt .L_802E9FA8
/* 802E9FA4 002B3564  3B 60 00 80 */	li r27, 0x80
.L_802E9FA8:
/* 802E9FA8 002B3568  2C 05 00 00 */	cmpwi r5, 0
/* 802E9FAC 002B356C  40 82 00 0C */	bne .L_802E9FB8
/* 802E9FB0 002B3570  38 60 00 05 */	li r3, 5
/* 802E9FB4 002B3574  48 00 01 80 */	b .L_802EA134
.L_802E9FB8:
/* 802E9FB8 002B3578  88 05 00 08 */	lbz r0, 8(r5)
/* 802E9FBC 002B357C  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802E9FC0 002B3580  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802E9FC4 002B3584  3B A0 00 00 */	li r29, 0
/* 802E9FC8 002B3588  54 1F 07 34 */	rlwinm r31, r0, 0, 0x1c, 0x1a
/* 802E9FCC 002B358C  3B C3 00 34 */	addi r30, r3, 0x34
.L_802E9FD0:
/* 802E9FD0 002B3590  88 1E 01 19 */	lbz r0, 0x119(r30)
/* 802E9FD4 002B3594  2C 00 00 00 */	cmpwi r0, 0
/* 802E9FD8 002B3598  41 82 00 1C */	beq .L_802E9FF4
/* 802E9FDC 002B359C  7F 44 D3 78 */	mr r4, r26
/* 802E9FE0 002B35A0  38 7E 00 08 */	addi r3, r30, 8
/* 802E9FE4 002B35A4  38 A0 00 06 */	li r5, 6
/* 802E9FE8 002B35A8  4B FD 48 45 */	bl memcmp
/* 802E9FEC 002B35AC  2C 03 00 00 */	cmpwi r3, 0
/* 802E9FF0 002B35B0  41 82 00 14 */	beq .L_802EA004
.L_802E9FF4:
/* 802E9FF4 002B35B4  3B BD 00 01 */	addi r29, r29, 1
/* 802E9FF8 002B35B8  3B DE 01 1C */	addi r30, r30, 0x11c
/* 802E9FFC 002B35BC  28 1D 00 04 */	cmplwi r29, 4
/* 802EA000 002B35C0  41 80 FF D0 */	blt .L_802E9FD0
.L_802EA004:
/* 802EA004 002B35C4  57 BE 06 3E */	clrlwi r30, r29, 0x18
/* 802EA008 002B35C8  2C 1E 00 04 */	cmpwi r30, 4
/* 802EA00C 002B35CC  40 82 00 0C */	bne .L_802EA018
/* 802EA010 002B35D0  38 60 00 07 */	li r3, 7
/* 802EA014 002B35D4  48 00 01 20 */	b .L_802EA134
.L_802EA018:
/* 802EA018 002B35D8  1C 1E 00 22 */	mulli r0, r30, 0x22
/* 802EA01C 002B35DC  3C 80 80 5C */	lis r4, btm_cb@ha
/* 802EA020 002B35E0  57 E3 06 3F */	clrlwi. r3, r31, 0x18
/* 802EA024 002B35E4  38 84 F9 F8 */	addi r4, r4, btm_cb@l
/* 802EA028 002B35E8  7C 84 02 14 */	add r4, r4, r0
/* 802EA02C 002B35EC  3B A4 04 CC */	addi r29, r4, 0x4cc
/* 802EA030 002B35F0  41 82 00 30 */	beq .L_802EA060
/* 802EA034 002B35F4  3B 43 FF FF */	addi r26, r3, -1
/* 802EA038 002B35F8  4B FF D9 FD */	bl BTM_ReadLocalFeatures
/* 802EA03C 002B35FC  38 82 BB F0 */	addi r4, r2, btm_pm_mode_off@sda21
/* 802EA040 002B3600  38 A2 BB F4 */	addi r5, r2, btm_pm_mode_msk@sda21
/* 802EA044 002B3604  7C 04 D0 AE */	lbzx r0, r4, r26
/* 802EA048 002B3608  7C 85 D0 AE */	lbzx r4, r5, r26
/* 802EA04C 002B360C  7C 03 00 AE */	lbzx r0, r3, r0
/* 802EA050 002B3610  7C 80 00 39 */	and. r0, r4, r0
/* 802EA054 002B3614  40 82 00 0C */	bne .L_802EA060
/* 802EA058 002B3618  38 60 00 04 */	li r3, 4
/* 802EA05C 002B361C  48 00 00 D8 */	b .L_802EA134
.L_802EA060:
/* 802EA060 002B3620  88 1D 00 20 */	lbz r0, 0x20(r29)
/* 802EA064 002B3624  57 E3 06 3E */	clrlwi r3, r31, 0x18
/* 802EA068 002B3628  7C 03 00 40 */	cmplw r3, r0
/* 802EA06C 002B362C  40 82 00 30 */	bne .L_802EA09C
/* 802EA070 002B3630  2C 03 00 00 */	cmpwi r3, 0
/* 802EA074 002B3634  41 82 00 20 */	beq .L_802EA094
/* 802EA078 002B3638  A0 7D 00 1E */	lhz r3, 0x1e(r29)
/* 802EA07C 002B363C  A0 1C 00 00 */	lhz r0, 0(r28)
/* 802EA080 002B3640  7C 00 18 40 */	cmplw r0, r3
/* 802EA084 002B3644  41 80 00 18 */	blt .L_802EA09C
/* 802EA088 002B3648  A0 1C 00 02 */	lhz r0, 2(r28)
/* 802EA08C 002B364C  7C 00 18 40 */	cmplw r0, r3
/* 802EA090 002B3650  41 81 00 0C */	bgt .L_802EA09C
.L_802EA094:
/* 802EA094 002B3654  38 60 00 00 */	li r3, 0
/* 802EA098 002B3658  48 00 00 9C */	b .L_802EA134
.L_802EA09C:
/* 802EA09C 002B365C  28 1B 00 80 */	cmplwi r27, 0x80
/* 802EA0A0 002B3660  41 82 00 54 */	beq .L_802EA0F4
/* 802EA0A4 002B3664  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA0A8 002B3668  57 60 1D 78 */	rlwinm r0, r27, 3, 0x15, 0x1c
/* 802EA0AC 002B366C  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA0B0 002B3670  7C 63 02 14 */	add r3, r3, r0
/* 802EA0B4 002B3674  88 03 05 58 */	lbz r0, 0x558(r3)
/* 802EA0B8 002B3678  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 802EA0BC 002B367C  41 82 00 38 */	beq .L_802EA0F4
/* 802EA0C0 002B3680  A0 9C 00 00 */	lhz r4, 0(r28)
/* 802EA0C4 002B3684  1C BB 00 0A */	mulli r5, r27, 0xa
/* 802EA0C8 002B3688  A0 7C 00 02 */	lhz r3, 2(r28)
/* 802EA0CC 002B368C  38 00 00 01 */	li r0, 1
/* 802EA0D0 002B3690  7C 85 EB 6E */	sthux r4, r5, r29
/* 802EA0D4 002B3694  B0 65 00 02 */	sth r3, 2(r5)
/* 802EA0D8 002B3698  A0 9C 00 04 */	lhz r4, 4(r28)
/* 802EA0DC 002B369C  A0 7C 00 06 */	lhz r3, 6(r28)
/* 802EA0E0 002B36A0  B0 85 00 04 */	sth r4, 4(r5)
/* 802EA0E4 002B36A4  B0 65 00 06 */	sth r3, 6(r5)
/* 802EA0E8 002B36A8  A0 7C 00 08 */	lhz r3, 8(r28)
/* 802EA0EC 002B36AC  B0 65 00 08 */	sth r3, 8(r5)
/* 802EA0F0 002B36B0  98 1D 00 21 */	stb r0, 0x21(r29)
.L_802EA0F4:
/* 802EA0F4 002B36B4  88 1D 00 20 */	lbz r0, 0x20(r29)
/* 802EA0F8 002B36B8  28 00 00 01 */	cmplwi r0, 1
/* 802EA0FC 002B36BC  41 82 00 20 */	beq .L_802EA11C
/* 802EA100 002B36C0  28 00 00 04 */	cmplwi r0, 4
/* 802EA104 002B36C4  41 82 00 18 */	beq .L_802EA11C
/* 802EA108 002B36C8  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA10C 002B36CC  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA110 002B36D0  88 03 05 64 */	lbz r0, 0x564(r3)
/* 802EA114 002B36D4  28 00 00 04 */	cmplwi r0, 4
/* 802EA118 002B36D8  41 82 00 0C */	beq .L_802EA124
.L_802EA11C:
/* 802EA11C 002B36DC  38 60 00 0D */	li r3, 0xd
/* 802EA120 002B36E0  48 00 00 14 */	b .L_802EA134
.L_802EA124:
/* 802EA124 002B36E4  7F 63 DB 78 */	mr r3, r27
/* 802EA128 002B36E8  7F C4 F3 78 */	mr r4, r30
/* 802EA12C 002B36EC  7F 85 E3 78 */	mr r5, r28
/* 802EA130 002B36F0  48 00 05 19 */	bl btm_pm_snd_md_req
.L_802EA134:
/* 802EA134 002B36F4  39 61 00 20 */	addi r11, r1, 0x20
/* 802EA138 002B36F8  4B FD 00 65 */	bl _restgpr_26
/* 802EA13C 002B36FC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 802EA140 002B3700  7C 08 03 A6 */	mtlr r0
/* 802EA144 002B3704  38 21 00 20 */	addi r1, r1, 0x20
/* 802EA148 002B3708  4E 80 00 20 */	blr 
.endfn BTM_SetPowerMode

.fn BTM_ReadPowerMode, global
/* 802EA14C 002B370C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802EA150 002B3710  7C 08 02 A6 */	mflr r0
/* 802EA154 002B3714  3C A0 80 5C */	lis r5, btm_cb@ha
/* 802EA158 002B3718  90 01 00 24 */	stw r0, 0x24(r1)
/* 802EA15C 002B371C  38 A5 F9 F8 */	addi r5, r5, btm_cb@l
/* 802EA160 002B3720  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 802EA164 002B3724  3B E0 00 00 */	li r31, 0
/* 802EA168 002B3728  93 C1 00 18 */	stw r30, 0x18(r1)
/* 802EA16C 002B372C  3B C5 00 34 */	addi r30, r5, 0x34
/* 802EA170 002B3730  93 A1 00 14 */	stw r29, 0x14(r1)
/* 802EA174 002B3734  7C 9D 23 78 */	mr r29, r4
/* 802EA178 002B3738  93 81 00 10 */	stw r28, 0x10(r1)
/* 802EA17C 002B373C  7C 7C 1B 78 */	mr r28, r3
.L_802EA180:
/* 802EA180 002B3740  88 1E 01 19 */	lbz r0, 0x119(r30)
/* 802EA184 002B3744  2C 00 00 00 */	cmpwi r0, 0
/* 802EA188 002B3748  41 82 00 1C */	beq .L_802EA1A4
/* 802EA18C 002B374C  7F 84 E3 78 */	mr r4, r28
/* 802EA190 002B3750  38 7E 00 08 */	addi r3, r30, 8
/* 802EA194 002B3754  38 A0 00 06 */	li r5, 6
/* 802EA198 002B3758  4B FD 46 95 */	bl memcmp
/* 802EA19C 002B375C  2C 03 00 00 */	cmpwi r3, 0
/* 802EA1A0 002B3760  41 82 00 14 */	beq .L_802EA1B4
.L_802EA1A4:
/* 802EA1A4 002B3764  3B FF 00 01 */	addi r31, r31, 1
/* 802EA1A8 002B3768  3B DE 01 1C */	addi r30, r30, 0x11c
/* 802EA1AC 002B376C  28 1F 00 04 */	cmplwi r31, 4
/* 802EA1B0 002B3770  41 80 FF D0 */	blt .L_802EA180
.L_802EA1B4:
/* 802EA1B4 002B3774  57 E0 06 3E */	clrlwi r0, r31, 0x18
/* 802EA1B8 002B3778  2C 00 00 04 */	cmpwi r0, 4
/* 802EA1BC 002B377C  40 82 00 0C */	bne .L_802EA1C8
/* 802EA1C0 002B3780  38 60 00 07 */	li r3, 7
/* 802EA1C4 002B3784  48 00 00 20 */	b .L_802EA1E4
.L_802EA1C8:
/* 802EA1C8 002B3788  1C 00 00 22 */	mulli r0, r0, 0x22
/* 802EA1CC 002B378C  3C 80 80 5C */	lis r4, btm_cb@ha
/* 802EA1D0 002B3790  38 60 00 00 */	li r3, 0
/* 802EA1D4 002B3794  38 84 F9 F8 */	addi r4, r4, btm_cb@l
/* 802EA1D8 002B3798  7C 84 02 14 */	add r4, r4, r0
/* 802EA1DC 002B379C  88 04 04 EC */	lbz r0, 0x4ec(r4)
/* 802EA1E0 002B37A0  98 1D 00 00 */	stb r0, 0(r29)
.L_802EA1E4:
/* 802EA1E4 002B37A4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 802EA1E8 002B37A8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 802EA1EC 002B37AC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 802EA1F0 002B37B0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 802EA1F4 002B37B4  83 81 00 10 */	lwz r28, 0x10(r1)
/* 802EA1F8 002B37B8  7C 08 03 A6 */	mtlr r0
/* 802EA1FC 002B37BC  38 21 00 20 */	addi r1, r1, 0x20
/* 802EA200 002B37C0  4E 80 00 20 */	blr 
.endfn BTM_ReadPowerMode

.fn btm_pm_reset, global
/* 802EA204 002B37C4  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA208 002B37C8  39 80 00 00 */	li r12, 0
/* 802EA20C 002B37CC  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA210 002B37D0  88 03 05 65 */	lbz r0, 0x565(r3)
/* 802EA214 002B37D4  28 00 00 80 */	cmplwi r0, 0x80
/* 802EA218 002B37D8  41 82 00 1C */	beq .L_802EA234
/* 802EA21C 002B37DC  54 00 1D 78 */	rlwinm r0, r0, 3, 0x15, 0x1c
/* 802EA220 002B37E0  7C 63 02 14 */	add r3, r3, r0
/* 802EA224 002B37E4  88 03 05 58 */	lbz r0, 0x558(r3)
/* 802EA228 002B37E8  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 802EA22C 002B37EC  41 82 00 08 */	beq .L_802EA234
/* 802EA230 002B37F0  81 83 05 54 */	lwz r12, 0x554(r3)
.L_802EA234:
/* 802EA234 002B37F4  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA238 002B37F8  2C 0C 00 00 */	cmpwi r12, 0
/* 802EA23C 002B37FC  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA240 002B3800  38 00 00 00 */	li r0, 0
/* 802EA244 002B3804  38 80 00 04 */	li r4, 4
/* 802EA248 002B3808  98 03 05 58 */	stb r0, 0x558(r3)
/* 802EA24C 002B380C  98 83 05 64 */	stb r4, 0x564(r3)
/* 802EA250 002B3810  98 03 05 60 */	stb r0, 0x560(r3)
/* 802EA254 002B3814  4D 82 00 20 */	beqlr 
/* 802EA258 002B3818  1C 04 01 1C */	mulli r0, r4, 0x11c
/* 802EA25C 002B381C  38 80 00 05 */	li r4, 5
/* 802EA260 002B3820  38 A0 00 0C */	li r5, 0xc
/* 802EA264 002B3824  38 C0 00 00 */	li r6, 0
/* 802EA268 002B3828  7C 63 02 14 */	add r3, r3, r0
/* 802EA26C 002B382C  38 63 00 3C */	addi r3, r3, 0x3c
/* 802EA270 002B3830  7D 89 03 A6 */	mtctr r12
/* 802EA274 002B3834  4E 80 04 20 */	bctr 
/* 802EA278 002B3838  4E 80 00 20 */	blr 
.endfn btm_pm_reset

.fn btm_pm_sm_alloc, global
/* 802EA27C 002B383C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802EA280 002B3840  7C 08 02 A6 */	mflr r0
/* 802EA284 002B3844  38 80 00 00 */	li r4, 0
/* 802EA288 002B3848  38 A0 00 22 */	li r5, 0x22
/* 802EA28C 002B384C  90 01 00 14 */	stw r0, 0x14(r1)
/* 802EA290 002B3850  1C 03 00 22 */	mulli r0, r3, 0x22
/* 802EA294 002B3854  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA298 002B3858  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802EA29C 002B385C  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA2A0 002B3860  7C 63 02 14 */	add r3, r3, r0
/* 802EA2A4 002B3864  3B E3 04 CC */	addi r31, r3, 0x4cc
/* 802EA2A8 002B3868  7F E3 FB 78 */	mr r3, r31
/* 802EA2AC 002B386C  4B D1 A0 A5 */	bl memset
/* 802EA2B0 002B3870  38 00 00 00 */	li r0, 0
/* 802EA2B4 002B3874  98 1F 00 20 */	stb r0, 0x20(r31)
/* 802EA2B8 002B3878  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 802EA2BC 002B387C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 802EA2C0 002B3880  7C 08 03 A6 */	mtlr r0
/* 802EA2C4 002B3884  38 21 00 10 */	addi r1, r1, 0x10
/* 802EA2C8 002B3888  4E 80 00 20 */	blr 
.endfn btm_pm_sm_alloc

.fn btm_pm_compare_modes, global
/* 802EA2CC 002B388C  2C 03 00 00 */	cmpwi r3, 0
/* 802EA2D0 002B3890  40 82 00 34 */	bne .L_802EA304
/* 802EA2D4 002B3894  A0 C4 00 00 */	lhz r6, 0(r4)
/* 802EA2D8 002B3898  7C 83 23 78 */	mr r3, r4
/* 802EA2DC 002B389C  A0 04 00 02 */	lhz r0, 2(r4)
/* 802EA2E0 002B38A0  B0 C5 00 00 */	sth r6, 0(r5)
/* 802EA2E4 002B38A4  B0 05 00 02 */	sth r0, 2(r5)
/* 802EA2E8 002B38A8  A0 C4 00 04 */	lhz r6, 4(r4)
/* 802EA2EC 002B38AC  A0 04 00 06 */	lhz r0, 6(r4)
/* 802EA2F0 002B38B0  B0 C5 00 04 */	sth r6, 4(r5)
/* 802EA2F4 002B38B4  B0 05 00 06 */	sth r0, 6(r5)
/* 802EA2F8 002B38B8  A0 04 00 08 */	lhz r0, 8(r4)
/* 802EA2FC 002B38BC  B0 05 00 08 */	sth r0, 8(r5)
/* 802EA300 002B38C0  4E 80 00 20 */	blr
.L_802EA304:
/* 802EA304 002B38C4  89 24 00 08 */	lbz r9, 8(r4)
/* 802EA308 002B38C8  2C 09 00 00 */	cmpwi r9, 0
/* 802EA30C 002B38CC  41 82 00 10 */	beq .L_802EA31C
/* 802EA310 002B38D0  89 03 00 08 */	lbz r8, 8(r3)
/* 802EA314 002B38D4  2C 08 00 00 */	cmpwi r8, 0
/* 802EA318 002B38D8  40 82 00 0C */	bne .L_802EA324
.L_802EA31C:
/* 802EA31C 002B38DC  38 60 00 00 */	li r3, 0
/* 802EA320 002B38E0  4E 80 00 20 */	blr
.L_802EA324:
/* 802EA324 002B38E4  55 00 06 F7 */	rlwinm. r0, r8, 0, 0x1b, 0x1b
/* 802EA328 002B38E8  41 82 00 40 */	beq .L_802EA368
/* 802EA32C 002B38EC  A0 83 00 00 */	lhz r4, 0(r3)
/* 802EA330 002B38F0  A0 03 00 02 */	lhz r0, 2(r3)
/* 802EA334 002B38F4  B0 85 00 00 */	sth r4, 0(r5)
/* 802EA338 002B38F8  B0 05 00 02 */	sth r0, 2(r5)
/* 802EA33C 002B38FC  A0 83 00 04 */	lhz r4, 4(r3)
/* 802EA340 002B3900  A0 03 00 06 */	lhz r0, 6(r3)
/* 802EA344 002B3904  B0 85 00 04 */	sth r4, 4(r5)
/* 802EA348 002B3908  B0 05 00 06 */	sth r0, 6(r5)
/* 802EA34C 002B390C  A0 03 00 08 */	lhz r0, 8(r3)
/* 802EA350 002B3910  7C A3 2B 78 */	mr r3, r5
/* 802EA354 002B3914  B0 05 00 08 */	sth r0, 8(r5)
/* 802EA358 002B3918  88 05 00 08 */	lbz r0, 8(r5)
/* 802EA35C 002B391C  54 00 07 34 */	rlwinm r0, r0, 0, 0x1c, 0x1a
/* 802EA360 002B3920  98 05 00 08 */	stb r0, 8(r5)
/* 802EA364 002B3924  4E 80 00 20 */	blr
.L_802EA368:
/* 802EA368 002B3928  55 20 06 F7 */	rlwinm. r0, r9, 0, 0x1b, 0x1b
/* 802EA36C 002B392C  41 82 00 40 */	beq .L_802EA3AC
/* 802EA370 002B3930  A0 C4 00 00 */	lhz r6, 0(r4)
/* 802EA374 002B3934  7C A3 2B 78 */	mr r3, r5
/* 802EA378 002B3938  A0 04 00 02 */	lhz r0, 2(r4)
/* 802EA37C 002B393C  B0 C5 00 00 */	sth r6, 0(r5)
/* 802EA380 002B3940  B0 05 00 02 */	sth r0, 2(r5)
/* 802EA384 002B3944  A0 C4 00 04 */	lhz r6, 4(r4)
/* 802EA388 002B3948  A0 04 00 06 */	lhz r0, 6(r4)
/* 802EA38C 002B394C  B0 C5 00 04 */	sth r6, 4(r5)
/* 802EA390 002B3950  B0 05 00 06 */	sth r0, 6(r5)
/* 802EA394 002B3954  A0 04 00 08 */	lhz r0, 8(r4)
/* 802EA398 002B3958  B0 05 00 08 */	sth r0, 8(r5)
/* 802EA39C 002B395C  88 05 00 08 */	lbz r0, 8(r5)
/* 802EA3A0 002B3960  54 00 07 34 */	rlwinm r0, r0, 0, 0x1c, 0x1a
/* 802EA3A4 002B3964  98 05 00 08 */	stb r0, 8(r5)
/* 802EA3A8 002B3968  4E 80 00 20 */	blr
.L_802EA3AC:
/* 802EA3AC 002B396C  38 E8 FF FF */	addi r7, r8, -1
/* 802EA3B0 002B3970  3C C0 80 51 */	lis r6, btm_pm_md_comp_matrix@ha
/* 802EA3B4 002B3974  54 E0 10 3A */	slwi r0, r7, 2
/* 802EA3B8 002B3978  7C 07 00 50 */	subf r0, r7, r0
/* 802EA3BC 002B397C  38 C6 E2 40 */	addi r6, r6, btm_pm_md_comp_matrix@l
/* 802EA3C0 002B3980  7C E9 02 14 */	add r7, r9, r0
/* 802EA3C4 002B3984  38 07 FF FF */	addi r0, r7, -1
/* 802EA3C8 002B3988  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 802EA3CC 002B398C  7C 06 00 AE */	lbzx r0, r6, r0
/* 802EA3D0 002B3990  2C 00 00 02 */	cmpwi r0, 2
/* 802EA3D4 002B3994  41 82 00 4C */	beq .L_802EA420
/* 802EA3D8 002B3998  40 80 00 10 */	bge .L_802EA3E8
/* 802EA3DC 002B399C  2C 00 00 01 */	cmpwi r0, 1
/* 802EA3E0 002B39A0  40 80 00 14 */	bge .L_802EA3F4
/* 802EA3E4 002B39A4  48 00 00 FC */	b .L_802EA4E0
.L_802EA3E8:
/* 802EA3E8 002B39A8  2C 00 00 04 */	cmpwi r0, 4
/* 802EA3EC 002B39AC  40 80 00 F4 */	bge .L_802EA4E0
/* 802EA3F0 002B39B0  48 00 00 60 */	b .L_802EA450
.L_802EA3F4:
/* 802EA3F4 002B39B4  A0 83 00 00 */	lhz r4, 0(r3)
/* 802EA3F8 002B39B8  A0 03 00 02 */	lhz r0, 2(r3)
/* 802EA3FC 002B39BC  B0 85 00 00 */	sth r4, 0(r5)
/* 802EA400 002B39C0  B0 05 00 02 */	sth r0, 2(r5)
/* 802EA404 002B39C4  A0 83 00 04 */	lhz r4, 4(r3)
/* 802EA408 002B39C8  A0 03 00 06 */	lhz r0, 6(r3)
/* 802EA40C 002B39CC  B0 85 00 04 */	sth r4, 4(r5)
/* 802EA410 002B39D0  B0 05 00 06 */	sth r0, 6(r5)
/* 802EA414 002B39D4  A0 03 00 08 */	lhz r0, 8(r3)
/* 802EA418 002B39D8  B0 05 00 08 */	sth r0, 8(r5)
/* 802EA41C 002B39DC  4E 80 00 20 */	blr
.L_802EA420:
/* 802EA420 002B39E0  A0 C4 00 00 */	lhz r6, 0(r4)
/* 802EA424 002B39E4  7C 83 23 78 */	mr r3, r4
/* 802EA428 002B39E8  A0 04 00 02 */	lhz r0, 2(r4)
/* 802EA42C 002B39EC  B0 C5 00 00 */	sth r6, 0(r5)
/* 802EA430 002B39F0  B0 05 00 02 */	sth r0, 2(r5)
/* 802EA434 002B39F4  A0 C4 00 04 */	lhz r6, 4(r4)
/* 802EA438 002B39F8  A0 04 00 06 */	lhz r0, 6(r4)
/* 802EA43C 002B39FC  B0 C5 00 04 */	sth r6, 4(r5)
/* 802EA440 002B3A00  B0 05 00 06 */	sth r0, 6(r5)
/* 802EA444 002B3A04  A0 04 00 08 */	lhz r0, 8(r4)
/* 802EA448 002B3A08  B0 05 00 08 */	sth r0, 8(r5)
/* 802EA44C 002B3A0C  4E 80 00 20 */	blr
.L_802EA450:
/* 802EA450 002B3A10  99 05 00 08 */	stb r8, 8(r5)
/* 802EA454 002B3A14  A0 C4 00 00 */	lhz r6, 0(r4)
/* 802EA458 002B3A18  A0 03 00 00 */	lhz r0, 0(r3)
/* 802EA45C 002B3A1C  7C 00 30 40 */	cmplw r0, r6
/* 802EA460 002B3A20  40 80 00 08 */	bge .L_802EA468
/* 802EA464 002B3A24  7C 06 03 78 */	mr r6, r0
.L_802EA468:
/* 802EA468 002B3A28  B0 C5 00 00 */	sth r6, 0(r5)
/* 802EA46C 002B3A2C  A0 E4 00 02 */	lhz r7, 2(r4)
/* 802EA470 002B3A30  A0 03 00 02 */	lhz r0, 2(r3)
/* 802EA474 002B3A34  7C 00 38 40 */	cmplw r0, r7
/* 802EA478 002B3A38  40 81 00 08 */	ble .L_802EA480
/* 802EA47C 002B3A3C  7C 07 03 78 */	mr r7, r0
.L_802EA480:
/* 802EA480 002B3A40  A0 C5 00 00 */	lhz r6, 0(r5)
/* 802EA484 002B3A44  54 E0 04 3E */	clrlwi r0, r7, 0x10
/* 802EA488 002B3A48  B0 E5 00 02 */	sth r7, 2(r5)
/* 802EA48C 002B3A4C  7C 06 00 40 */	cmplw r6, r0
/* 802EA490 002B3A50  40 80 00 0C */	bge .L_802EA49C
/* 802EA494 002B3A54  38 60 00 00 */	li r3, 0
/* 802EA498 002B3A58  4E 80 00 20 */	blr
.L_802EA49C:
/* 802EA49C 002B3A5C  88 05 00 08 */	lbz r0, 8(r5)
/* 802EA4A0 002B3A60  28 00 00 02 */	cmplwi r0, 2
/* 802EA4A4 002B3A64  40 82 00 34 */	bne .L_802EA4D8
/* 802EA4A8 002B3A68  A0 C4 00 04 */	lhz r6, 4(r4)
/* 802EA4AC 002B3A6C  A0 03 00 04 */	lhz r0, 4(r3)
/* 802EA4B0 002B3A70  7C 00 30 40 */	cmplw r0, r6
/* 802EA4B4 002B3A74  40 81 00 08 */	ble .L_802EA4BC
/* 802EA4B8 002B3A78  7C 06 03 78 */	mr r6, r0
.L_802EA4BC:
/* 802EA4BC 002B3A7C  B0 C5 00 04 */	sth r6, 4(r5)
/* 802EA4C0 002B3A80  A0 84 00 06 */	lhz r4, 6(r4)
/* 802EA4C4 002B3A84  A0 03 00 06 */	lhz r0, 6(r3)
/* 802EA4C8 002B3A88  7C 00 20 40 */	cmplw r0, r4
/* 802EA4CC 002B3A8C  40 81 00 08 */	ble .L_802EA4D4
/* 802EA4D0 002B3A90  7C 04 03 78 */	mr r4, r0
.L_802EA4D4:
/* 802EA4D4 002B3A94  B0 85 00 06 */	sth r4, 6(r5)
.L_802EA4D8:
/* 802EA4D8 002B3A98  7C A3 2B 78 */	mr r3, r5
/* 802EA4DC 002B3A9C  4E 80 00 20 */	blr
.L_802EA4E0:
/* 802EA4E0 002B3AA0  38 60 00 00 */	li r3, 0
/* 802EA4E4 002B3AA4  4E 80 00 20 */	blr 
.endfn btm_pm_compare_modes

.fn btm_pm_get_set_mode, global
/* 802EA4E8 002B3AA8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802EA4EC 002B3AAC  7C 08 02 A6 */	mflr r0
/* 802EA4F0 002B3AB0  90 01 00 24 */	stw r0, 0x24(r1)
/* 802EA4F4 002B3AB4  39 61 00 20 */	addi r11, r1, 0x20
/* 802EA4F8 002B3AB8  4B FC FC 59 */	bl _savegpr_26
/* 802EA4FC 002B3ABC  2C 05 00 00 */	cmpwi r5, 0
/* 802EA500 002B3AC0  7C 7A 1B 78 */	mr r26, r3
/* 802EA504 002B3AC4  7C BB 2B 78 */	mr r27, r5
/* 802EA508 002B3AC8  7C DC 33 78 */	mr r28, r6
/* 802EA50C 002B3ACC  38 E0 00 00 */	li r7, 0
/* 802EA510 002B3AD0  41 82 00 48 */	beq .L_802EA558
/* 802EA514 002B3AD4  88 05 00 08 */	lbz r0, 8(r5)
/* 802EA518 002B3AD8  54 00 06 F7 */	rlwinm. r0, r0, 0, 0x1b, 0x1b
/* 802EA51C 002B3ADC  41 82 00 3C */	beq .L_802EA558
/* 802EA520 002B3AE0  A0 65 00 00 */	lhz r3, 0(r5)
/* 802EA524 002B3AE4  A0 05 00 02 */	lhz r0, 2(r5)
/* 802EA528 002B3AE8  B0 66 00 00 */	sth r3, 0(r6)
/* 802EA52C 002B3AEC  B0 06 00 02 */	sth r0, 2(r6)
/* 802EA530 002B3AF0  A0 65 00 04 */	lhz r3, 4(r5)
/* 802EA534 002B3AF4  A0 05 00 06 */	lhz r0, 6(r5)
/* 802EA538 002B3AF8  B0 66 00 04 */	sth r3, 4(r6)
/* 802EA53C 002B3AFC  B0 06 00 06 */	sth r0, 6(r6)
/* 802EA540 002B3B00  A0 05 00 08 */	lhz r0, 8(r5)
/* 802EA544 002B3B04  B0 06 00 08 */	sth r0, 8(r6)
/* 802EA548 002B3B08  88 06 00 08 */	lbz r0, 8(r6)
/* 802EA54C 002B3B0C  54 03 07 34 */	rlwinm r3, r0, 0, 0x1c, 0x1a
/* 802EA550 002B3B10  98 66 00 08 */	stb r3, 8(r6)
/* 802EA554 002B3B14  48 00 00 DC */	b .L_802EA630
.L_802EA558:
/* 802EA558 002B3B18  3F E0 80 5C */	lis r31, btm_cb@ha
/* 802EA55C 002B3B1C  7C 9E 23 78 */	mr r30, r4
/* 802EA560 002B3B20  3B FF F9 F8 */	addi r31, r31, btm_cb@l
/* 802EA564 002B3B24  3B A0 00 00 */	li r29, 0
.L_802EA568:
/* 802EA568 002B3B28  88 1F 05 58 */	lbz r0, 0x558(r31)
/* 802EA56C 002B3B2C  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 802EA570 002B3B30  41 82 00 3C */	beq .L_802EA5AC
/* 802EA574 002B3B34  88 1E 00 08 */	lbz r0, 8(r30)
/* 802EA578 002B3B38  2C 00 00 00 */	cmpwi r0, 0
/* 802EA57C 002B3B3C  40 82 00 0C */	bne .L_802EA588
/* 802EA580 002B3B40  38 60 00 00 */	li r3, 0
/* 802EA584 002B3B44  48 00 00 AC */	b .L_802EA630
.L_802EA588:
/* 802EA588 002B3B48  7C E3 3B 78 */	mr r3, r7
/* 802EA58C 002B3B4C  7F C4 F3 78 */	mr r4, r30
/* 802EA590 002B3B50  7F 85 E3 78 */	mr r5, r28
/* 802EA594 002B3B54  4B FF FD 39 */	bl btm_pm_compare_modes
/* 802EA598 002B3B58  2C 03 00 00 */	cmpwi r3, 0
/* 802EA59C 002B3B5C  40 82 00 0C */	bne .L_802EA5A8
/* 802EA5A0 002B3B60  38 60 00 00 */	li r3, 0
/* 802EA5A4 002B3B64  48 00 00 8C */	b .L_802EA630
.L_802EA5A8:
/* 802EA5A8 002B3B68  7F 87 E3 78 */	mr r7, r28
.L_802EA5AC:
/* 802EA5AC 002B3B6C  3B BD 00 01 */	addi r29, r29, 1
/* 802EA5B0 002B3B70  3B DE 00 0A */	addi r30, r30, 0xa
/* 802EA5B4 002B3B74  2C 1D 00 02 */	cmpwi r29, 2
/* 802EA5B8 002B3B78  3B FF 00 08 */	addi r31, r31, 8
/* 802EA5BC 002B3B7C  41 80 FF AC */	blt .L_802EA568
/* 802EA5C0 002B3B80  2C 07 00 00 */	cmpwi r7, 0
/* 802EA5C4 002B3B84  40 82 00 40 */	bne .L_802EA604
/* 802EA5C8 002B3B88  2C 1B 00 00 */	cmpwi r27, 0
/* 802EA5CC 002B3B8C  41 82 00 30 */	beq .L_802EA5FC
/* 802EA5D0 002B3B90  A0 7B 00 00 */	lhz r3, 0(r27)
/* 802EA5D4 002B3B94  A0 1B 00 02 */	lhz r0, 2(r27)
/* 802EA5D8 002B3B98  B0 7C 00 00 */	sth r3, 0(r28)
/* 802EA5DC 002B3B9C  B0 1C 00 02 */	sth r0, 2(r28)
/* 802EA5E0 002B3BA0  A0 7B 00 04 */	lhz r3, 4(r27)
/* 802EA5E4 002B3BA4  A0 1B 00 06 */	lhz r0, 6(r27)
/* 802EA5E8 002B3BA8  B0 7C 00 04 */	sth r3, 4(r28)
/* 802EA5EC 002B3BAC  B0 1C 00 06 */	sth r0, 6(r28)
/* 802EA5F0 002B3BB0  A0 1B 00 08 */	lhz r0, 8(r27)
/* 802EA5F4 002B3BB4  B0 1C 00 08 */	sth r0, 8(r28)
/* 802EA5F8 002B3BB8  48 00 00 34 */	b .L_802EA62C
.L_802EA5FC:
/* 802EA5FC 002B3BBC  38 60 00 00 */	li r3, 0
/* 802EA600 002B3BC0  48 00 00 30 */	b .L_802EA630
.L_802EA604:
/* 802EA604 002B3BC4  28 1A 00 80 */	cmplwi r26, 0x80
/* 802EA608 002B3BC8  40 82 00 24 */	bne .L_802EA62C
/* 802EA60C 002B3BCC  7F 63 DB 78 */	mr r3, r27
/* 802EA610 002B3BD0  7C E4 3B 78 */	mr r4, r7
/* 802EA614 002B3BD4  7F 85 E3 78 */	mr r5, r28
/* 802EA618 002B3BD8  4B FF FC B5 */	bl btm_pm_compare_modes
/* 802EA61C 002B3BDC  2C 03 00 00 */	cmpwi r3, 0
/* 802EA620 002B3BE0  40 82 00 0C */	bne .L_802EA62C
/* 802EA624 002B3BE4  38 60 00 00 */	li r3, 0
/* 802EA628 002B3BE8  48 00 00 08 */	b .L_802EA630
.L_802EA62C:
/* 802EA62C 002B3BEC  88 7C 00 08 */	lbz r3, 8(r28)
.L_802EA630:
/* 802EA630 002B3BF0  39 61 00 20 */	addi r11, r1, 0x20
/* 802EA634 002B3BF4  4B FC FB 69 */	bl _restgpr_26
/* 802EA638 002B3BF8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 802EA63C 002B3BFC  7C 08 03 A6 */	mtlr r0
/* 802EA640 002B3C00  38 21 00 20 */	addi r1, r1, 0x20
/* 802EA644 002B3C04  4E 80 00 20 */	blr 
.endfn btm_pm_get_set_mode

.fn btm_pm_snd_md_req, global
/* 802EA648 002B3C08  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 802EA64C 002B3C0C  7C 08 02 A6 */	mflr r0
/* 802EA650 002B3C10  3C C0 80 5C */	lis r6, btm_cb@ha
/* 802EA654 002B3C14  90 01 00 34 */	stw r0, 0x34(r1)
/* 802EA658 002B3C18  1C 04 00 22 */	mulli r0, r4, 0x22
/* 802EA65C 002B3C1C  38 C6 F9 F8 */	addi r6, r6, btm_cb@l
/* 802EA660 002B3C20  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 802EA664 002B3C24  3B E0 00 00 */	li r31, 0
/* 802EA668 002B3C28  93 C1 00 28 */	stw r30, 0x28(r1)
/* 802EA66C 002B3C2C  7C 9E 23 78 */	mr r30, r4
/* 802EA670 002B3C30  93 A1 00 24 */	stw r29, 0x24(r1)
/* 802EA674 002B3C34  7C 7D 1B 78 */	mr r29, r3
/* 802EA678 002B3C38  7C 66 02 14 */	add r3, r6, r0
/* 802EA67C 002B3C3C  38 C1 00 08 */	addi r6, r1, 8
/* 802EA680 002B3C40  93 81 00 20 */	stw r28, 0x20(r1)
/* 802EA684 002B3C44  3B 83 04 CC */	addi r28, r3, 0x4cc
/* 802EA688 002B3C48  7F A3 EB 78 */	mr r3, r29
/* 802EA68C 002B3C4C  7F 84 E3 78 */	mr r4, r28
/* 802EA690 002B3C50  4B FF FE 59 */	bl btm_pm_get_set_mode
/* 802EA694 002B3C54  88 9C 00 20 */	lbz r4, 0x20(r28)
/* 802EA698 002B3C58  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 802EA69C 002B3C5C  98 61 00 10 */	stb r3, 0x10(r1)
/* 802EA6A0 002B3C60  7C 04 00 40 */	cmplw r4, r0
/* 802EA6A4 002B3C64  40 82 00 34 */	bne .L_802EA6D8
/* 802EA6A8 002B3C68  2C 00 00 00 */	cmpwi r0, 0
/* 802EA6AC 002B3C6C  41 82 00 20 */	beq .L_802EA6CC
/* 802EA6B0 002B3C70  A0 9C 00 1E */	lhz r4, 0x1e(r28)
/* 802EA6B4 002B3C74  A0 01 00 08 */	lhz r0, 8(r1)
/* 802EA6B8 002B3C78  7C 00 20 40 */	cmplw r0, r4
/* 802EA6BC 002B3C7C  41 80 00 18 */	blt .L_802EA6D4
/* 802EA6C0 002B3C80  A0 01 00 0A */	lhz r0, 0xa(r1)
/* 802EA6C4 002B3C84  7C 00 20 40 */	cmplw r0, r4
/* 802EA6C8 002B3C88  41 81 00 0C */	bgt .L_802EA6D4
.L_802EA6CC:
/* 802EA6CC 002B3C8C  38 60 00 0D */	li r3, 0xd
/* 802EA6D0 002B3C90  48 00 01 8C */	b .L_802EA85C
.L_802EA6D4:
/* 802EA6D4 002B3C94  3B E0 00 01 */	li r31, 1
.L_802EA6D8:
/* 802EA6D8 002B3C98  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802EA6DC 002B3C9C  9B FC 00 21 */	stb r31, 0x21(r28)
/* 802EA6E0 002B3CA0  41 82 00 18 */	beq .L_802EA6F8
/* 802EA6E4 002B3CA4  88 1C 00 20 */	lbz r0, 0x20(r28)
/* 802EA6E8 002B3CA8  2C 00 00 00 */	cmpwi r0, 0
/* 802EA6EC 002B3CAC  41 82 00 0C */	beq .L_802EA6F8
/* 802EA6F0 002B3CB0  38 00 00 01 */	li r0, 1
/* 802EA6F4 002B3CB4  98 1C 00 21 */	stb r0, 0x21(r28)
.L_802EA6F8:
/* 802EA6F8 002B3CB8  38 60 00 02 */	li r3, 2
/* 802EA6FC 002B3CBC  4B FF 0C F5 */	bl GKI_getpoolbuf
/* 802EA700 002B3CC0  2C 03 00 00 */	cmpwi r3, 0
/* 802EA704 002B3CC4  7C 7F 1B 78 */	mr r31, r3
/* 802EA708 002B3CC8  40 82 00 0C */	bne .L_802EA714
/* 802EA70C 002B3CCC  38 60 00 03 */	li r3, 3
/* 802EA710 002B3CD0  48 00 01 4C */	b .L_802EA85C
.L_802EA714:
/* 802EA714 002B3CD4  88 1C 00 21 */	lbz r0, 0x21(r28)
/* 802EA718 002B3CD8  28 00 00 01 */	cmplwi r0, 1
/* 802EA71C 002B3CDC  40 82 00 0C */	bne .L_802EA728
/* 802EA720 002B3CE0  38 00 00 00 */	li r0, 0
/* 802EA724 002B3CE4  98 01 00 10 */	stb r0, 0x10(r1)
.L_802EA728:
/* 802EA728 002B3CE8  88 01 00 10 */	lbz r0, 0x10(r1)
/* 802EA72C 002B3CEC  3C 80 80 5C */	lis r4, btm_cb@ha
/* 802EA730 002B3CF0  38 84 F9 F8 */	addi r4, r4, btm_cb@l
/* 802EA734 002B3CF4  2C 00 00 02 */	cmpwi r0, 2
/* 802EA738 002B3CF8  9B C4 05 64 */	stb r30, 0x564(r4)
/* 802EA73C 002B3CFC  9B A4 05 65 */	stb r29, 0x565(r4)
/* 802EA740 002B3D00  41 82 00 A4 */	beq .L_802EA7E4
/* 802EA744 002B3D04  40 80 00 14 */	bge .L_802EA758
/* 802EA748 002B3D08  2C 00 00 00 */	cmpwi r0, 0
/* 802EA74C 002B3D0C  41 82 00 18 */	beq .L_802EA764
/* 802EA750 002B3D10  40 80 00 74 */	bge .L_802EA7C4
/* 802EA754 002B3D14  48 00 00 D8 */	b .L_802EA82C
.L_802EA758:
/* 802EA758 002B3D18  2C 00 00 04 */	cmpwi r0, 4
/* 802EA75C 002B3D1C  40 80 00 D0 */	bge .L_802EA82C
/* 802EA760 002B3D20  48 00 00 AC */	b .L_802EA80C
.L_802EA764:
/* 802EA764 002B3D24  88 1C 00 20 */	lbz r0, 0x20(r28)
/* 802EA768 002B3D28  2C 00 00 03 */	cmpwi r0, 3
/* 802EA76C 002B3D2C  41 82 00 2C */	beq .L_802EA798
/* 802EA770 002B3D30  40 80 00 40 */	bge .L_802EA7B0
/* 802EA774 002B3D34  2C 00 00 02 */	cmpwi r0, 2
/* 802EA778 002B3D38  40 80 00 08 */	bge .L_802EA780
/* 802EA77C 002B3D3C  48 00 00 34 */	b .L_802EA7B0
.L_802EA780:
/* 802EA780 002B3D40  1C 1E 01 1C */	mulli r0, r30, 0x11c
/* 802EA784 002B3D44  7F E3 FB 78 */	mr r3, r31
/* 802EA788 002B3D48  7C 84 02 14 */	add r4, r4, r0
/* 802EA78C 002B3D4C  A0 84 00 34 */	lhz r4, 0x34(r4)
/* 802EA790 002B3D50  48 00 78 B1 */	bl btsnd_hcic_exit_sniff_mode
/* 802EA794 002B3D54  48 00 00 A8 */	b .L_802EA83C
.L_802EA798:
/* 802EA798 002B3D58  1C 1E 01 1C */	mulli r0, r30, 0x11c
/* 802EA79C 002B3D5C  7F E3 FB 78 */	mr r3, r31
/* 802EA7A0 002B3D60  7C 84 02 14 */	add r4, r4, r0
/* 802EA7A4 002B3D64  A0 84 00 34 */	lhz r4, 0x34(r4)
/* 802EA7A8 002B3D68  48 00 79 D1 */	bl btsnd_hcic_exit_park_mode
/* 802EA7AC 002B3D6C  48 00 00 90 */	b .L_802EA83C
.L_802EA7B0:
/* 802EA7B0 002B3D70  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA7B4 002B3D74  38 00 00 04 */	li r0, 4
/* 802EA7B8 002B3D78  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA7BC 002B3D7C  98 03 05 64 */	stb r0, 0x564(r3)
/* 802EA7C0 002B3D80  48 00 00 7C */	b .L_802EA83C
.L_802EA7C4:
/* 802EA7C4 002B3D84  1C 1E 01 1C */	mulli r0, r30, 0x11c
/* 802EA7C8 002B3D88  A0 A1 00 08 */	lhz r5, 8(r1)
/* 802EA7CC 002B3D8C  A0 C1 00 0A */	lhz r6, 0xa(r1)
/* 802EA7D0 002B3D90  7F E3 FB 78 */	mr r3, r31
/* 802EA7D4 002B3D94  7C 84 02 14 */	add r4, r4, r0
/* 802EA7D8 002B3D98  A0 84 00 34 */	lhz r4, 0x34(r4)
/* 802EA7DC 002B3D9C  48 00 76 E5 */	bl btsnd_hcic_hold_mode
/* 802EA7E0 002B3DA0  48 00 00 5C */	b .L_802EA83C
.L_802EA7E4:
/* 802EA7E4 002B3DA4  1C 1E 01 1C */	mulli r0, r30, 0x11c
/* 802EA7E8 002B3DA8  A0 A1 00 08 */	lhz r5, 8(r1)
/* 802EA7EC 002B3DAC  A0 C1 00 0A */	lhz r6, 0xa(r1)
/* 802EA7F0 002B3DB0  7F E3 FB 78 */	mr r3, r31
/* 802EA7F4 002B3DB4  A0 E1 00 0C */	lhz r7, 0xc(r1)
/* 802EA7F8 002B3DB8  7C 84 02 14 */	add r4, r4, r0
/* 802EA7FC 002B3DBC  A0 84 00 34 */	lhz r4, 0x34(r4)
/* 802EA800 002B3DC0  A1 01 00 0E */	lhz r8, 0xe(r1)
/* 802EA804 002B3DC4  48 00 77 71 */	bl btsnd_hcic_sniff_mode
/* 802EA808 002B3DC8  48 00 00 34 */	b .L_802EA83C
.L_802EA80C:
/* 802EA80C 002B3DCC  1C 1E 01 1C */	mulli r0, r30, 0x11c
/* 802EA810 002B3DD0  A0 A1 00 08 */	lhz r5, 8(r1)
/* 802EA814 002B3DD4  A0 C1 00 0A */	lhz r6, 0xa(r1)
/* 802EA818 002B3DD8  7F E3 FB 78 */	mr r3, r31
/* 802EA81C 002B3DDC  7C 84 02 14 */	add r4, r4, r0
/* 802EA820 002B3DE0  A0 84 00 34 */	lhz r4, 0x34(r4)
/* 802EA824 002B3DE4  48 00 78 A1 */	bl btsnd_hcic_park_mode
/* 802EA828 002B3DE8  48 00 00 14 */	b .L_802EA83C
.L_802EA82C:
/* 802EA82C 002B3DEC  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA830 002B3DF0  38 00 00 04 */	li r0, 4
/* 802EA834 002B3DF4  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA838 002B3DF8  98 03 05 64 */	stb r0, 0x564(r3)
.L_802EA83C:
/* 802EA83C 002B3DFC  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA840 002B3E00  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA844 002B3E04  88 03 05 64 */	lbz r0, 0x564(r3)
/* 802EA848 002B3E08  28 00 00 04 */	cmplwi r0, 4
/* 802EA84C 002B3E0C  40 82 00 0C */	bne .L_802EA858
/* 802EA850 002B3E10  7F E3 FB 78 */	mr r3, r31
/* 802EA854 002B3E14  4B FF 0C 8D */	bl GKI_freebuf
.L_802EA858:
/* 802EA858 002B3E18  38 60 00 01 */	li r3, 1
.L_802EA85C:
/* 802EA85C 002B3E1C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 802EA860 002B3E20  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 802EA864 002B3E24  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 802EA868 002B3E28  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 802EA86C 002B3E2C  83 81 00 20 */	lwz r28, 0x20(r1)
/* 802EA870 002B3E30  7C 08 03 A6 */	mtlr r0
/* 802EA874 002B3E34  38 21 00 30 */	addi r1, r1, 0x30
/* 802EA878 002B3E38  4E 80 00 20 */	blr 
.endfn btm_pm_snd_md_req

.fn btm_pm_proc_cmd_status, global
/* 802EA87C 002B3E3C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802EA880 002B3E40  7C 08 02 A6 */	mflr r0
/* 802EA884 002B3E44  3C 80 80 5C */	lis r4, btm_cb@ha
/* 802EA888 002B3E48  90 01 00 14 */	stw r0, 0x14(r1)
/* 802EA88C 002B3E4C  38 84 F9 F8 */	addi r4, r4, btm_cb@l
/* 802EA890 002B3E50  88 04 05 64 */	lbz r0, 0x564(r4)
/* 802EA894 002B3E54  28 00 00 04 */	cmplwi r0, 4
/* 802EA898 002B3E58  40 80 00 84 */	bge .L_802EA91C
/* 802EA89C 002B3E5C  1C 00 00 22 */	mulli r0, r0, 0x22
/* 802EA8A0 002B3E60  2C 03 00 00 */	cmpwi r3, 0
/* 802EA8A4 002B3E64  7C A4 02 14 */	add r5, r4, r0
/* 802EA8A8 002B3E68  40 82 00 14 */	bne .L_802EA8BC
/* 802EA8AC 002B3E6C  38 00 00 04 */	li r0, 4
/* 802EA8B0 002B3E70  38 80 00 04 */	li r4, 4
/* 802EA8B4 002B3E74  98 05 04 EC */	stb r0, 0x4ec(r5)
/* 802EA8B8 002B3E78  48 00 00 08 */	b .L_802EA8C0
.L_802EA8BC:
/* 802EA8BC 002B3E7C  38 80 00 05 */	li r4, 5
.L_802EA8C0:
/* 802EA8C0 002B3E80  3C E0 80 5C */	lis r7, btm_cb@ha
/* 802EA8C4 002B3E84  38 E7 F9 F8 */	addi r7, r7, btm_cb@l
/* 802EA8C8 002B3E88  88 07 05 65 */	lbz r0, 0x565(r7)
/* 802EA8CC 002B3E8C  28 00 00 80 */	cmplwi r0, 0x80
/* 802EA8D0 002B3E90  41 82 00 3C */	beq .L_802EA90C
/* 802EA8D4 002B3E94  54 00 1D 78 */	rlwinm r0, r0, 3, 0x15, 0x1c
/* 802EA8D8 002B3E98  7C A7 02 14 */	add r5, r7, r0
/* 802EA8DC 002B3E9C  88 05 05 58 */	lbz r0, 0x558(r5)
/* 802EA8E0 002B3EA0  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 802EA8E4 002B3EA4  41 82 00 28 */	beq .L_802EA90C
/* 802EA8E8 002B3EA8  88 07 05 64 */	lbz r0, 0x564(r7)
/* 802EA8EC 002B3EAC  7C 66 1B 78 */	mr r6, r3
/* 802EA8F0 002B3EB0  81 85 05 54 */	lwz r12, 0x554(r5)
/* 802EA8F4 002B3EB4  38 A0 00 00 */	li r5, 0
/* 802EA8F8 002B3EB8  1C 00 01 1C */	mulli r0, r0, 0x11c
/* 802EA8FC 002B3EBC  7C 67 02 14 */	add r3, r7, r0
/* 802EA900 002B3EC0  38 63 00 3C */	addi r3, r3, 0x3c
/* 802EA904 002B3EC4  7D 89 03 A6 */	mtctr r12
/* 802EA908 002B3EC8  4E 80 04 21 */	bctrl 
.L_802EA90C:
/* 802EA90C 002B3ECC  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA910 002B3ED0  38 00 00 04 */	li r0, 4
/* 802EA914 002B3ED4  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA918 002B3ED8  98 03 05 64 */	stb r0, 0x564(r3)
.L_802EA91C:
/* 802EA91C 002B3EDC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 802EA920 002B3EE0  7C 08 03 A6 */	mtlr r0
/* 802EA924 002B3EE4  38 21 00 10 */	addi r1, r1, 0x10
/* 802EA928 002B3EE8  4E 80 00 20 */	blr 
.endfn btm_pm_proc_cmd_status

.fn btm_pm_proc_mode_change, global
/* 802EA92C 002B3EEC  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 802EA930 002B3EF0  7C 08 02 A6 */	mflr r0
/* 802EA934 002B3EF4  90 01 00 34 */	stw r0, 0x34(r1)
/* 802EA938 002B3EF8  39 61 00 30 */	addi r11, r1, 0x30
/* 802EA93C 002B3EFC  4B FC F8 0D */	bl _savegpr_24
/* 802EA940 002B3F00  7C 9A 23 78 */	mr r26, r4
/* 802EA944 002B3F04  7C 79 1B 78 */	mr r25, r3
/* 802EA948 002B3F08  7C BB 2B 78 */	mr r27, r5
/* 802EA94C 002B3F0C  7C DC 33 78 */	mr r28, r6
/* 802EA950 002B3F10  7F 43 D3 78 */	mr r3, r26
/* 802EA954 002B3F14  4B FF 9B C9 */	bl btm_handle_to_acl_index
/* 802EA958 002B3F18  54 7D 06 3E */	clrlwi r29, r3, 0x18
/* 802EA95C 002B3F1C  2C 1D 00 04 */	cmpwi r29, 4
/* 802EA960 002B3F20  40 80 01 DC */	bge .L_802EAB3C
/* 802EA964 002B3F24  1F DD 01 1C */	mulli r30, r29, 0x11c
/* 802EA968 002B3F28  3F 00 80 5C */	lis r24, btm_cb@ha
/* 802EA96C 002B3F2C  2C 1B 00 00 */	cmpwi r27, 0
/* 802EA970 002B3F30  3B 18 F9 F8 */	addi r24, r24, btm_cb@l
/* 802EA974 002B3F34  7F F8 F2 14 */	add r31, r24, r30
/* 802EA978 002B3F38  40 82 00 58 */	bne .L_802EA9D0
/* 802EA97C 002B3F3C  A0 1F 00 38 */	lhz r0, 0x38(r31)
/* 802EA980 002B3F40  2C 00 00 00 */	cmpwi r0, 0
/* 802EA984 002B3F44  41 82 00 4C */	beq .L_802EA9D0
/* 802EA988 002B3F48  48 00 0F 1D */	bl btm_num_sco_links_active
/* 802EA98C 002B3F4C  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802EA990 002B3F50  40 82 00 40 */	bne .L_802EA9D0
/* 802EA994 002B3F54  38 00 00 00 */	li r0, 0
/* 802EA998 002B3F58  B0 1F 00 38 */	sth r0, 0x38(r31)
/* 802EA99C 002B3F5C  88 18 27 C0 */	lbz r0, 0x27c0(r24)
/* 802EA9A0 002B3F60  28 00 00 05 */	cmplwi r0, 5
/* 802EA9A4 002B3F64  41 80 00 20 */	blt .L_802EA9C4
/* 802EA9A8 002B3F68  3C 60 00 0D */	lis r3, 0x000D0004@ha
/* 802EA9AC 002B3F6C  3C 80 80 54 */	lis r4, lbl_805454F0@ha
/* 802EA9B0 002B3F70  A0 DF 00 36 */	lhz r6, 0x36(r31)
/* 802EA9B4 002B3F74  7F 45 D3 78 */	mr r5, r26
/* 802EA9B8 002B3F78  38 63 00 04 */	addi r3, r3, 0x000D0004@l
/* 802EA9BC 002B3F7C  38 84 54 F0 */	addi r4, r4, lbl_805454F0@l
/* 802EA9C0 002B3F80  4B FF 36 21 */	bl LogMsg_2
.L_802EA9C4:
/* 802EA9C4 002B3F84  A0 7F 00 34 */	lhz r3, 0x34(r31)
/* 802EA9C8 002B3F88  A0 9F 00 36 */	lhz r4, 0x36(r31)
/* 802EA9CC 002B3F8C  48 00 6E 2D */	bl btsnd_hcic_change_conn_type
.L_802EA9D0:
/* 802EA9D0 002B3F90  1C 1D 00 22 */	mulli r0, r29, 0x22
/* 802EA9D4 002B3F94  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EA9D8 002B3F98  2C 1B 00 00 */	cmpwi r27, 0
/* 802EA9DC 002B3F9C  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EA9E0 002B3FA0  7C 83 02 14 */	add r4, r3, r0
/* 802EA9E4 002B3FA4  9B 64 04 EC */	stb r27, 0x4ec(r4)
/* 802EA9E8 002B3FA8  38 00 00 00 */	li r0, 0
/* 802EA9EC 002B3FAC  B3 84 04 EA */	sth r28, 0x4ea(r4)
/* 802EA9F0 002B3FB0  40 82 00 14 */	bne .L_802EAA04
/* 802EA9F4 002B3FB4  88 64 04 D4 */	lbz r3, 0x4d4(r4)
/* 802EA9F8 002B3FB8  28 03 00 01 */	cmplwi r3, 1
/* 802EA9FC 002B3FBC  40 82 00 08 */	bne .L_802EAA04
/* 802EAA00 002B3FC0  98 04 04 D4 */	stb r0, 0x4d4(r4)
.L_802EAA04:
/* 802EAA04 002B3FC4  2C 1B 00 00 */	cmpwi r27, 0
/* 802EAA08 002B3FC8  38 A4 04 D6 */	addi r5, r4, 0x4d6
/* 802EAA0C 002B3FCC  40 82 00 14 */	bne .L_802EAA20
/* 802EAA10 002B3FD0  88 65 00 08 */	lbz r3, 8(r5)
/* 802EAA14 002B3FD4  28 03 00 01 */	cmplwi r3, 1
/* 802EAA18 002B3FD8  40 82 00 08 */	bne .L_802EAA20
/* 802EAA1C 002B3FDC  98 05 00 08 */	stb r0, 8(r5)
.L_802EAA20:
/* 802EAA20 002B3FE0  88 04 04 ED */	lbz r0, 0x4ed(r4)
/* 802EAA24 002B3FE4  28 00 00 01 */	cmplwi r0, 1
/* 802EAA28 002B3FE8  40 82 00 14 */	bne .L_802EAA3C
/* 802EAA2C 002B3FEC  7F A4 EB 78 */	mr r4, r29
/* 802EAA30 002B3FF0  38 60 00 80 */	li r3, 0x80
/* 802EAA34 002B3FF4  38 A0 00 00 */	li r5, 0
/* 802EAA38 002B3FF8  4B FF FC 11 */	bl btm_pm_snd_md_req
.L_802EAA3C:
/* 802EAA3C 002B3FFC  3F 00 80 5C */	lis r24, btm_cb@ha
/* 802EAA40 002B4000  3B A0 00 00 */	li r29, 0
/* 802EAA44 002B4004  3B 18 F9 F8 */	addi r24, r24, btm_cb@l
.L_802EAA48:
/* 802EAA48 002B4008  88 18 05 58 */	lbz r0, 0x558(r24)
/* 802EAA4C 002B400C  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 802EAA50 002B4010  41 82 00 20 */	beq .L_802EAA70
/* 802EAA54 002B4014  81 98 05 54 */	lwz r12, 0x554(r24)
/* 802EAA58 002B4018  7F 64 DB 78 */	mr r4, r27
/* 802EAA5C 002B401C  7F 85 E3 78 */	mr r5, r28
/* 802EAA60 002B4020  7F 26 CB 78 */	mr r6, r25
/* 802EAA64 002B4024  38 7F 00 3C */	addi r3, r31, 0x3c
/* 802EAA68 002B4028  7D 89 03 A6 */	mtctr r12
/* 802EAA6C 002B402C  4E 80 04 21 */	bctrl 
.L_802EAA70:
/* 802EAA70 002B4030  3B BD 00 01 */	addi r29, r29, 1
/* 802EAA74 002B4034  3B 18 00 08 */	addi r24, r24, 8
/* 802EAA78 002B4038  2C 1D 00 02 */	cmpwi r29, 2
/* 802EAA7C 002B403C  41 80 FF CC */	blt .L_802EAA48
/* 802EAA80 002B4040  3C 60 80 5C */	lis r3, btm_cb@ha
/* 802EAA84 002B4044  38 63 F9 F8 */	addi r3, r3, btm_cb@l
/* 802EAA88 002B4048  7F 83 F2 14 */	add r28, r3, r30
/* 802EAA8C 002B404C  88 1C 01 4F */	lbz r0, 0x14f(r28)
/* 802EAA90 002B4050  28 00 00 01 */	cmplwi r0, 1
/* 802EAA94 002B4054  40 82 00 A8 */	bne .L_802EAB3C
/* 802EAA98 002B4058  3B 1C 00 3C */	addi r24, r28, 0x3c
/* 802EAA9C 002B405C  7F 03 C3 78 */	mr r3, r24
/* 802EAAA0 002B4060  4B FF BC 51 */	bl btm_find_dev
/* 802EAAA4 002B4064  2C 03 00 00 */	cmpwi r3, 0
/* 802EAAA8 002B4068  41 82 00 30 */	beq .L_802EAAD8
/* 802EAAAC 002B406C  88 03 00 76 */	lbz r0, 0x76(r3)
/* 802EAAB0 002B4070  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 802EAAB4 002B4074  41 82 00 24 */	beq .L_802EAAD8
/* 802EAAB8 002B4078  7F 43 D3 78 */	mr r3, r26
/* 802EAABC 002B407C  38 80 00 00 */	li r4, 0
/* 802EAAC0 002B4080  48 00 6E 45 */	bl btsnd_hcic_set_conn_encrypt
/* 802EAAC4 002B4084  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802EAAC8 002B4088  41 82 00 44 */	beq .L_802EAB0C
/* 802EAACC 002B408C  38 00 00 02 */	li r0, 2
/* 802EAAD0 002B4090  98 1C 01 4F */	stb r0, 0x14f(r28)
/* 802EAAD4 002B4094  48 00 00 68 */	b .L_802EAB3C
.L_802EAAD8:
/* 802EAAD8 002B4098  3C 80 80 5C */	lis r4, btm_cb@ha
/* 802EAADC 002B409C  7F 03 C3 78 */	mr r3, r24
/* 802EAAE0 002B40A0  38 84 F9 F8 */	addi r4, r4, btm_cb@l
/* 802EAAE4 002B40A4  7C 84 F2 14 */	add r4, r4, r30
/* 802EAAE8 002B40A8  88 04 01 4E */	lbz r0, 0x14e(r4)
/* 802EAAEC 002B40AC  7C 00 00 34 */	cntlzw r0, r0
/* 802EAAF0 002B40B0  54 04 DE 3E */	rlwinm r4, r0, 0x1b, 0x18, 0x1f
/* 802EAAF4 002B40B4  48 00 77 09 */	bl btsnd_hcic_switch_role
/* 802EAAF8 002B40B8  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802EAAFC 002B40BC  41 82 00 10 */	beq .L_802EAB0C
/* 802EAB00 002B40C0  38 00 00 00 */	li r0, 0
/* 802EAB04 002B40C4  98 1C 01 4F */	stb r0, 0x14f(r28)
/* 802EAB08 002B40C8  48 00 00 34 */	b .L_802EAB3C
.L_802EAB0C:
/* 802EAB0C 002B40CC  3B 60 00 00 */	li r27, 0
/* 802EAB10 002B40D0  3F 40 80 5C */	lis r26, btm_cb@ha
/* 802EAB14 002B40D4  9B 7C 01 4F */	stb r27, 0x14f(r28)
/* 802EAB18 002B40D8  3B 5A F9 F8 */	addi r26, r26, btm_cb@l
/* 802EAB1C 002B40DC  81 9A 06 2C */	lwz r12, 0x62c(r26)
/* 802EAB20 002B40E0  2C 0C 00 00 */	cmpwi r12, 0
/* 802EAB24 002B40E4  41 82 00 18 */	beq .L_802EAB3C
/* 802EAB28 002B40E8  9B 3A 06 24 */	stb r25, 0x624(r26)
/* 802EAB2C 002B40EC  38 7A 06 24 */	addi r3, r26, 0x624
/* 802EAB30 002B40F0  7D 89 03 A6 */	mtctr r12
/* 802EAB34 002B40F4  4E 80 04 21 */	bctrl 
/* 802EAB38 002B40F8  93 7A 06 2C */	stw r27, 0x62c(r26)
.L_802EAB3C:
/* 802EAB3C 002B40FC  39 61 00 30 */	addi r11, r1, 0x30
/* 802EAB40 002B4100  4B FC F6 55 */	bl _restgpr_24
/* 802EAB44 002B4104  80 01 00 34 */	lwz r0, 0x34(r1)
/* 802EAB48 002B4108  7C 08 03 A6 */	mtlr r0
/* 802EAB4C 002B410C  38 21 00 30 */	addi r1, r1, 0x30
/* 802EAB50 002B4110  4E 80 00 20 */	blr
.endfn btm_pm_proc_mode_change

.section .data, "wa"  # 0x805281E0 - 0x80573C60

.global lbl_805454F0
lbl_805454F0:
	.asciz "btm mode change AFTER unsniffing; hci hdl 0x%x, types 0x%02x"
	.balign 4

.section .rodata, "a"  # 0x804F5B20 - 0x805281E0

btm_pm_md_comp_matrix:
	.4byte 0x03020201
	.4byte 0x03010102
	.4byte 0x03000000
	.4byte 0

.section .sdata2, "a"  # 0x80668380 - 0x8066DCE0

btm_pm_mode_off:
	.4byte 0x00000100

btm_pm_mode_msk:
	.4byte 0x40800100