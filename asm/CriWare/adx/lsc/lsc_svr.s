.include "macros.inc"

.section .text, "ax"  # 0x80039220 - 0x804F5900

.global lsc_StatWait
lsc_StatWait:
/* 803919C0 0035AF80  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803919C4 0035AF84  7C 08 02 A6 */	mflr r0
/* 803919C8 0035AF88  90 01 00 24 */	stw r0, 0x24(r1)
/* 803919CC 0035AF8C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803919D0 0035AF90  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803919D4 0035AF94  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803919D8 0035AF98  7C 7D 1B 78 */	mr r29, r3
/* 803919DC 0035AF9C  80 03 00 24 */	lwz r0, 0x24(r3)
/* 803919E0 0035AFA0  80 83 00 20 */	lwz r4, 0x20(r3)
/* 803919E4 0035AFA4  2C 00 00 00 */	cmpwi r0, 0
/* 803919E8 0035AFA8  54 80 28 34 */	slwi r0, r4, 5
/* 803919EC 0035AFAC  7F E3 02 14 */	add r31, r3, r0
/* 803919F0 0035AFB0  40 81 01 60 */	ble lbl_80391B50
/* 803919F4 0035AFB4  80 63 00 28 */	lwz r3, 0x28(r3)
/* 803919F8 0035AFB8  4B FE FC D5 */	bl ADXSTM_StopNw
/* 803919FC 0035AFBC  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391A00 0035AFC0  4B FE F8 E9 */	bl ADXSTM_ReleaseFileNw
/* 80391A04 0035AFC4  83 DF 00 3C */	lwz r30, 0x3c(r31)
/* 80391A08 0035AFC8  7F C3 F3 78 */	mr r3, r30
/* 80391A0C 0035AFCC  4B F2 7B AD */	bl strlen
/* 80391A10 0035AFD0  2C 03 00 00 */	cmpwi r3, 0
/* 80391A14 0035AFD4  38 C0 00 00 */	li r6, 0
/* 80391A18 0035AFD8  38 E0 00 00 */	li r7, 0
/* 80391A1C 0035AFDC  41 82 00 94 */	beq lbl_80391AB0
/* 80391A20 0035AFE0  28 03 00 08 */	cmplwi r3, 8
/* 80391A24 0035AFE4  38 83 FF F8 */	addi r4, r3, -8
/* 80391A28 0035AFE8  40 81 00 64 */	ble lbl_80391A8C
/* 80391A2C 0035AFEC  38 04 00 07 */	addi r0, r4, 7
/* 80391A30 0035AFF0  54 00 E8 FE */	srwi r0, r0, 3
/* 80391A34 0035AFF4  7C 09 03 A6 */	mtctr r0
/* 80391A38 0035AFF8  28 04 00 00 */	cmplwi r4, 0
/* 80391A3C 0035AFFC  40 81 00 50 */	ble lbl_80391A8C
lbl_80391A40:
/* 80391A40 0035B000  7C BE 3A 14 */	add r5, r30, r7
/* 80391A44 0035B004  7C 9E 38 AE */	lbzx r4, r30, r7
/* 80391A48 0035B008  88 05 00 01 */	lbz r0, 1(r5)
/* 80391A4C 0035B00C  38 E7 00 08 */	addi r7, r7, 8
/* 80391A50 0035B010  7C C6 22 14 */	add r6, r6, r4
/* 80391A54 0035B014  88 85 00 02 */	lbz r4, 2(r5)
/* 80391A58 0035B018  7C C6 02 14 */	add r6, r6, r0
/* 80391A5C 0035B01C  88 05 00 03 */	lbz r0, 3(r5)
/* 80391A60 0035B020  7C C6 22 14 */	add r6, r6, r4
/* 80391A64 0035B024  88 85 00 04 */	lbz r4, 4(r5)
/* 80391A68 0035B028  7C C6 02 14 */	add r6, r6, r0
/* 80391A6C 0035B02C  88 05 00 05 */	lbz r0, 5(r5)
/* 80391A70 0035B030  7C C6 22 14 */	add r6, r6, r4
/* 80391A74 0035B034  88 85 00 06 */	lbz r4, 6(r5)
/* 80391A78 0035B038  7C C6 02 14 */	add r6, r6, r0
/* 80391A7C 0035B03C  88 05 00 07 */	lbz r0, 7(r5)
/* 80391A80 0035B040  7C C6 22 14 */	add r6, r6, r4
/* 80391A84 0035B044  7C C6 02 14 */	add r6, r6, r0
/* 80391A88 0035B048  42 00 FF B8 */	bdnz lbl_80391A40
lbl_80391A8C:
/* 80391A8C 0035B04C  7C 07 18 50 */	subf r0, r7, r3
/* 80391A90 0035B050  7C 9E 3A 14 */	add r4, r30, r7
/* 80391A94 0035B054  7C 09 03 A6 */	mtctr r0
/* 80391A98 0035B058  7C 07 18 40 */	cmplw r7, r3
/* 80391A9C 0035B05C  40 80 00 14 */	bge lbl_80391AB0
lbl_80391AA0:
/* 80391AA0 0035B060  88 04 00 00 */	lbz r0, 0(r4)
/* 80391AA4 0035B064  38 84 00 01 */	addi r4, r4, 1
/* 80391AA8 0035B068  7C C6 02 14 */	add r6, r6, r0
/* 80391AAC 0035B06C  42 00 FF F4 */	bdnz lbl_80391AA0
lbl_80391AB0:
/* 80391AB0 0035B070  80 1F 00 40 */	lwz r0, 0x40(r31)
/* 80391AB4 0035B074  7C 06 00 40 */	cmplw r6, r0
/* 80391AB8 0035B078  41 82 00 1C */	beq lbl_80391AD4
/* 80391ABC 0035B07C  3C 60 80 52 */	lis r3, lbl_8051BA60@ha
/* 80391AC0 0035B080  7F C4 F3 78 */	mr r4, r30
/* 80391AC4 0035B084  38 63 BA 60 */	addi r3, r3, lbl_8051BA60@l
/* 80391AC8 0035B088  4C C6 31 82 */	crclr 6
/* 80391ACC 0035B08C  4B FF FD 11 */	bl LSC_CallErrFunc_
/* 80391AD0 0035B090  48 00 00 80 */	b lbl_80391B50
lbl_80391AD4:
/* 80391AD4 0035B094  81 1F 00 4C */	lwz r8, 0x4c(r31)
/* 80391AD8 0035B098  7F C4 F3 78 */	mr r4, r30
/* 80391ADC 0035B09C  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391AE0 0035B0A0  7D 00 FE 70 */	srawi r0, r8, 0x1f
/* 80391AE4 0035B0A4  80 BF 00 44 */	lwz r5, 0x44(r31)
/* 80391AE8 0035B0A8  54 07 58 28 */	slwi r7, r0, 0xb
/* 80391AEC 0035B0AC  80 DF 00 48 */	lwz r6, 0x48(r31)
/* 80391AF0 0035B0B0  51 07 5D 7E */	rlwimi r7, r8, 0xb, 0x15, 0x1f
/* 80391AF4 0035B0B4  55 08 58 28 */	slwi r8, r8, 0xb
/* 80391AF8 0035B0B8  4B FE F7 5D */	bl ADXSTM_BindFileNw
/* 80391AFC 0035B0BC  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391B00 0035B0C0  80 9F 00 4C */	lwz r4, 0x4c(r31)
/* 80391B04 0035B0C4  4B FE FD A5 */	bl ADXSTM_SetEos
/* 80391B08 0035B0C8  80 7F 00 4C */	lwz r3, 0x4c(r31)
/* 80391B0C 0035B0CC  38 00 00 00 */	li r0, 0
/* 80391B10 0035B0D0  90 7D 00 2C */	stw r3, 0x2c(r29)
/* 80391B14 0035B0D4  90 1F 00 54 */	stw r0, 0x54(r31)
/* 80391B18 0035B0D8  98 1D 00 02 */	stb r0, 2(r29)
/* 80391B1C 0035B0DC  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391B20 0035B0E0  80 9D 00 14 */	lwz r4, 0x14(r29)
/* 80391B24 0035B0E4  80 BD 00 18 */	lwz r5, 0x18(r29)
/* 80391B28 0035B0E8  4B FF 06 31 */	bl ADXSTM_SetBufSize
/* 80391B2C 0035B0EC  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391B30 0035B0F0  38 80 00 00 */	li r4, 0
/* 80391B34 0035B0F4  4B FE F9 D9 */	bl ADXSTM_Seek
/* 80391B38 0035B0F8  80 7D 00 28 */	lwz r3, 0x28(r29)
/* 80391B3C 0035B0FC  4B FE FA 75 */	bl ADXSTM_Start
/* 80391B40 0035B100  38 00 00 01 */	li r0, 1
/* 80391B44 0035B104  98 1D 00 02 */	stb r0, 2(r29)
/* 80391B48 0035B108  38 00 00 01 */	li r0, 1
/* 80391B4C 0035B10C  90 1F 00 50 */	stw r0, 0x50(r31)
lbl_80391B50:
/* 80391B50 0035B110  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80391B54 0035B114  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80391B58 0035B118  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80391B5C 0035B11C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80391B60 0035B120  7C 08 03 A6 */	mtlr r0
/* 80391B64 0035B124  38 21 00 20 */	addi r1, r1, 0x20
/* 80391B68 0035B128  4E 80 00 20 */	blr 

.global lsc_StatEnd
lsc_StatEnd:
/* 80391B6C 0035B12C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80391B70 0035B130  7C 08 02 A6 */	mflr r0
/* 80391B74 0035B134  90 01 00 24 */	stw r0, 0x24(r1)
/* 80391B78 0035B138  BF 61 00 0C */	stmw r27, 0xc(r1)
/* 80391B7C 0035B13C  7C 7B 1B 78 */	mr r27, r3
/* 80391B80 0035B140  3B E0 00 00 */	li r31, 0
/* 80391B84 0035B144  3B C0 00 00 */	li r30, 0
/* 80391B88 0035B148  3B A0 00 00 */	li r29, 0
/* 80391B8C 0035B14C  3B 80 00 00 */	li r28, 0
/* 80391B90 0035B150  80 03 00 28 */	lwz r0, 0x28(r3)
/* 80391B94 0035B154  2C 00 00 00 */	cmpwi r0, 0
/* 80391B98 0035B158  41 82 00 8C */	beq lbl_80391C24
/* 80391B9C 0035B15C  88 03 00 03 */	lbz r0, 3(r3)
/* 80391BA0 0035B160  2C 00 00 01 */	cmpwi r0, 1
/* 80391BA4 0035B164  40 82 00 20 */	bne lbl_80391BC4
/* 80391BA8 0035B168  80 03 00 20 */	lwz r0, 0x20(r3)
/* 80391BAC 0035B16C  54 00 28 34 */	slwi r0, r0, 5
/* 80391BB0 0035B170  7C 83 02 14 */	add r4, r3, r0
/* 80391BB4 0035B174  83 E4 00 3C */	lwz r31, 0x3c(r4)
/* 80391BB8 0035B178  83 C4 00 44 */	lwz r30, 0x44(r4)
/* 80391BBC 0035B17C  83 A4 00 48 */	lwz r29, 0x48(r4)
/* 80391BC0 0035B180  83 84 00 4C */	lwz r28, 0x4c(r4)
lbl_80391BC4:
/* 80391BC4 0035B184  80 83 00 20 */	lwz r4, 0x20(r3)
/* 80391BC8 0035B188  80 A3 00 24 */	lwz r5, 0x24(r3)
/* 80391BCC 0035B18C  38 84 00 01 */	addi r4, r4, 1
/* 80391BD0 0035B190  54 80 E0 06 */	slwi r0, r4, 0x1c
/* 80391BD4 0035B194  34 A5 FF FF */	addic. r5, r5, -1
/* 80391BD8 0035B198  54 84 0F FE */	srwi r4, r4, 0x1f
/* 80391BDC 0035B19C  7C 04 00 50 */	subf r0, r4, r0
/* 80391BE0 0035B1A0  54 00 20 3E */	rotlwi r0, r0, 4
/* 80391BE4 0035B1A4  90 A3 00 24 */	stw r5, 0x24(r3)
/* 80391BE8 0035B1A8  7C 00 22 14 */	add r0, r0, r4
/* 80391BEC 0035B1AC  90 03 00 20 */	stw r0, 0x20(r3)
/* 80391BF0 0035B1B0  41 81 00 10 */	bgt lbl_80391C00
/* 80391BF4 0035B1B4  48 00 0B 91 */	bl LSC_CallStatFunc
/* 80391BF8 0035B1B8  38 00 00 01 */	li r0, 1
/* 80391BFC 0035B1BC  98 1B 00 01 */	stb r0, 1(r27)
lbl_80391C00:
/* 80391C00 0035B1C0  88 1B 00 03 */	lbz r0, 3(r27)
/* 80391C04 0035B1C4  2C 00 00 01 */	cmpwi r0, 1
/* 80391C08 0035B1C8  40 82 00 1C */	bne lbl_80391C24
/* 80391C0C 0035B1CC  7F 63 DB 78 */	mr r3, r27
/* 80391C10 0035B1D0  7F E4 FB 78 */	mr r4, r31
/* 80391C14 0035B1D4  7F C5 F3 78 */	mr r5, r30
/* 80391C18 0035B1D8  7F A6 EB 78 */	mr r6, r29
/* 80391C1C 0035B1DC  7F 87 E3 78 */	mr r7, r28
/* 80391C20 0035B1E0  48 00 04 A5 */	bl LSC_EntryFileRange
lbl_80391C24:
/* 80391C24 0035B1E4  BB 61 00 0C */	lmw r27, 0xc(r1)
/* 80391C28 0035B1E8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80391C2C 0035B1EC  7C 08 03 A6 */	mtlr r0
/* 80391C30 0035B1F0  38 21 00 20 */	addi r1, r1, 0x20
/* 80391C34 0035B1F4  4E 80 00 20 */	blr 

.global lsc_ExecHndl
lsc_ExecHndl:
/* 80391C38 0035B1F8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80391C3C 0035B1FC  7C 08 02 A6 */	mflr r0
/* 80391C40 0035B200  90 01 00 14 */	stw r0, 0x14(r1)
/* 80391C44 0035B204  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80391C48 0035B208  7C 7F 1B 78 */	mr r31, r3
/* 80391C4C 0035B20C  93 C1 00 08 */	stw r30, 8(r1)
/* 80391C50 0035B210  88 03 00 04 */	lbz r0, 4(r3)
/* 80391C54 0035B214  2C 00 00 01 */	cmpwi r0, 1
/* 80391C58 0035B218  41 82 00 E8 */	beq lbl_80391D40
/* 80391C5C 0035B21C  88 03 00 01 */	lbz r0, 1(r3)
/* 80391C60 0035B220  2C 00 00 02 */	cmpwi r0, 2
/* 80391C64 0035B224  40 82 00 DC */	bne lbl_80391D40
/* 80391C68 0035B228  80 03 00 24 */	lwz r0, 0x24(r3)
/* 80391C6C 0035B22C  2C 00 00 00 */	cmpwi r0, 0
/* 80391C70 0035B230  40 81 00 D0 */	ble lbl_80391D40
/* 80391C74 0035B234  80 03 00 20 */	lwz r0, 0x20(r3)
/* 80391C78 0035B238  54 00 28 34 */	slwi r0, r0, 5
/* 80391C7C 0035B23C  7F C3 02 14 */	add r30, r3, r0
/* 80391C80 0035B240  80 1E 00 50 */	lwz r0, 0x50(r30)
/* 80391C84 0035B244  2C 00 00 01 */	cmpwi r0, 1
/* 80391C88 0035B248  40 82 00 78 */	bne lbl_80391D00
/* 80391C8C 0035B24C  80 63 00 28 */	lwz r3, 0x28(r3)
/* 80391C90 0035B250  2C 03 00 00 */	cmpwi r3, 0
/* 80391C94 0035B254  40 82 00 1C */	bne lbl_80391CB0
/* 80391C98 0035B258  3C 60 80 52 */	lis r3, lbl_8051BA60@ha
/* 80391C9C 0035B25C  38 63 BA 60 */	addi r3, r3, lbl_8051BA60@l
/* 80391CA0 0035B260  38 63 00 40 */	addi r3, r3, 0x40
/* 80391CA4 0035B264  4C C6 31 82 */	crclr 6
/* 80391CA8 0035B268  4B FF FB 35 */	bl LSC_CallErrFunc_
/* 80391CAC 0035B26C  48 00 00 54 */	b lbl_80391D00
lbl_80391CB0:
/* 80391CB0 0035B270  4B FE F8 21 */	bl ADXSTM_GetStat
/* 80391CB4 0035B274  2C 03 00 03 */	cmpwi r3, 3
/* 80391CB8 0035B278  41 82 00 38 */	beq lbl_80391CF0
/* 80391CBC 0035B27C  40 80 00 10 */	bge lbl_80391CCC
/* 80391CC0 0035B280  2C 03 00 02 */	cmpwi r3, 2
/* 80391CC4 0035B284  40 80 00 1C */	bge lbl_80391CE0
/* 80391CC8 0035B288  48 00 00 38 */	b lbl_80391D00
lbl_80391CCC:
/* 80391CCC 0035B28C  2C 03 00 05 */	cmpwi r3, 5
/* 80391CD0 0035B290  40 80 00 30 */	bge lbl_80391D00
/* 80391CD4 0035B294  38 00 00 03 */	li r0, 3
/* 80391CD8 0035B298  98 1F 00 01 */	stb r0, 1(r31)
/* 80391CDC 0035B29C  48 00 00 24 */	b lbl_80391D00
lbl_80391CE0:
/* 80391CE0 0035B2A0  80 7F 00 28 */	lwz r3, 0x28(r31)
/* 80391CE4 0035B2A4  4B FE F8 81 */	bl ADXSTM_Tell
/* 80391CE8 0035B2A8  90 7E 00 54 */	stw r3, 0x54(r30)
/* 80391CEC 0035B2AC  48 00 00 14 */	b lbl_80391D00
lbl_80391CF0:
/* 80391CF0 0035B2B0  80 7F 00 2C */	lwz r3, 0x2c(r31)
/* 80391CF4 0035B2B4  38 00 00 02 */	li r0, 2
/* 80391CF8 0035B2B8  90 7E 00 54 */	stw r3, 0x54(r30)
/* 80391CFC 0035B2BC  90 1E 00 50 */	stw r0, 0x50(r30)
lbl_80391D00:
/* 80391D00 0035B2C0  80 1F 00 20 */	lwz r0, 0x20(r31)
/* 80391D04 0035B2C4  54 00 28 34 */	slwi r0, r0, 5
/* 80391D08 0035B2C8  7C 7F 02 14 */	add r3, r31, r0
/* 80391D0C 0035B2CC  80 03 00 50 */	lwz r0, 0x50(r3)
/* 80391D10 0035B2D0  2C 00 00 02 */	cmpwi r0, 2
/* 80391D14 0035B2D4  40 82 00 0C */	bne lbl_80391D20
/* 80391D18 0035B2D8  7F E3 FB 78 */	mr r3, r31
/* 80391D1C 0035B2DC  4B FF FE 51 */	bl lsc_StatEnd
lbl_80391D20:
/* 80391D20 0035B2E0  80 1F 00 20 */	lwz r0, 0x20(r31)
/* 80391D24 0035B2E4  54 00 28 34 */	slwi r0, r0, 5
/* 80391D28 0035B2E8  7C 7F 02 14 */	add r3, r31, r0
/* 80391D2C 0035B2EC  80 03 00 50 */	lwz r0, 0x50(r3)
/* 80391D30 0035B2F0  2C 00 00 00 */	cmpwi r0, 0
/* 80391D34 0035B2F4  40 82 00 0C */	bne lbl_80391D40
/* 80391D38 0035B2F8  7F E3 FB 78 */	mr r3, r31
/* 80391D3C 0035B2FC  4B FF FC 85 */	bl lsc_StatWait
lbl_80391D40:
/* 80391D40 0035B300  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80391D44 0035B304  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80391D48 0035B308  83 C1 00 08 */	lwz r30, 8(r1)
/* 80391D4C 0035B30C  7C 08 03 A6 */	mtlr r0
/* 80391D50 0035B310  38 21 00 10 */	addi r1, r1, 0x10
/* 80391D54 0035B314  4E 80 00 20 */	blr