.include "macros.inc"

.section .text, "ax"  # 0x80039220 - 0x804F5900

.global __fwrite
__fwrite:
/* 802BDDA8 00287368  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 802BDDAC 0028736C  7C 08 02 A6 */	mflr r0
/* 802BDDB0 00287370  90 01 00 34 */	stw r0, 0x34(r1)
/* 802BDDB4 00287374  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 802BDDB8 00287378  7C 9B 23 78 */	mr r27, r4
/* 802BDDBC 0028737C  7C DC 33 78 */	mr r28, r6
/* 802BDDC0 00287380  7C 7A 1B 78 */	mr r26, r3
/* 802BDDC4 00287384  7C B9 2B 78 */	mr r25, r5
/* 802BDDC8 00287388  38 80 00 00 */	li r4, 0
/* 802BDDCC 0028738C  7F 83 E3 78 */	mr r3, r28
/* 802BDDD0 00287390  48 00 92 C9 */	bl fwide
/* 802BDDD4 00287394  2C 03 00 00 */	cmpwi r3, 0
/* 802BDDD8 00287398  40 82 00 10 */	bne lbl_802BDDE8
/* 802BDDDC 0028739C  7F 83 E3 78 */	mr r3, r28
/* 802BDDE0 002873A0  38 80 FF FF */	li r4, -1
/* 802BDDE4 002873A4  48 00 92 B5 */	bl fwide
lbl_802BDDE8:
/* 802BDDE8 002873A8  7F DB C9 D7 */	mullw. r30, r27, r25
/* 802BDDEC 002873AC  41 82 00 1C */	beq lbl_802BDE08
/* 802BDDF0 002873B0  88 1C 00 0A */	lbz r0, 0xa(r28)
/* 802BDDF4 002873B4  2C 00 00 00 */	cmpwi r0, 0
/* 802BDDF8 002873B8  40 82 00 10 */	bne lbl_802BDE08
/* 802BDDFC 002873BC  80 1C 00 04 */	lwz r0, 4(r28)
/* 802BDE00 002873C0  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 802BDE04 002873C4  40 82 00 0C */	bne lbl_802BDE10
lbl_802BDE08:
/* 802BDE08 002873C8  38 60 00 00 */	li r3, 0
/* 802BDE0C 002873CC  48 00 02 90 */	b lbl_802BE09C
lbl_802BDE10:
/* 802BDE10 002873D0  28 00 00 02 */	cmplwi r0, 2
/* 802BDE14 002873D4  40 82 00 08 */	bne lbl_802BDE1C
/* 802BDE18 002873D8  48 00 0E 25 */	bl __stdio_atexit
lbl_802BDE1C:
/* 802BDE1C 002873DC  80 7C 00 04 */	lwz r3, 4(r28)
/* 802BDE20 002873E0  3B E0 00 01 */	li r31, 1
/* 802BDE24 002873E4  38 80 00 00 */	li r4, 0
/* 802BDE28 002873E8  54 60 6F FF */	rlwinm. r0, r3, 0xd, 0x1f, 0x1f
/* 802BDE2C 002873EC  41 82 00 10 */	beq lbl_802BDE3C
/* 802BDE30 002873F0  54 60 3F BE */	rlwinm r0, r3, 7, 0x1e, 0x1f
/* 802BDE34 002873F4  28 00 00 02 */	cmplwi r0, 2
/* 802BDE38 002873F8  40 82 00 08 */	bne lbl_802BDE40
lbl_802BDE3C:
/* 802BDE3C 002873FC  38 80 00 01 */	li r4, 1
lbl_802BDE40:
/* 802BDE40 00287400  2C 04 00 00 */	cmpwi r4, 0
/* 802BDE44 00287404  40 82 00 18 */	bne lbl_802BDE5C
/* 802BDE48 00287408  80 1C 00 04 */	lwz r0, 4(r28)
/* 802BDE4C 0028740C  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 802BDE50 00287410  28 00 00 01 */	cmplwi r0, 1
/* 802BDE54 00287414  41 82 00 08 */	beq lbl_802BDE5C
/* 802BDE58 00287418  3B E0 00 00 */	li r31, 0
lbl_802BDE5C:
/* 802BDE5C 0028741C  80 1C 00 08 */	lwz r0, 8(r28)
/* 802BDE60 00287420  54 00 1F 7F */	rlwinm. r0, r0, 3, 0x1d, 0x1f
/* 802BDE64 00287424  40 82 00 54 */	bne lbl_802BDEB8
/* 802BDE68 00287428  80 7C 00 04 */	lwz r3, 4(r28)
/* 802BDE6C 0028742C  54 60 2F BD */	rlwinm. r0, r3, 5, 0x1e, 0x1e
/* 802BDE70 00287430  54 60 2F 7E */	rlwinm r0, r3, 5, 0x1d, 0x1f
/* 802BDE74 00287434  41 82 00 44 */	beq lbl_802BDEB8
/* 802BDE78 00287438  54 00 07 7B */	rlwinm. r0, r0, 0, 0x1d, 0x1d
/* 802BDE7C 0028743C  41 82 00 24 */	beq lbl_802BDEA0
/* 802BDE80 00287440  7F 83 E3 78 */	mr r3, r28
/* 802BDE84 00287444  38 80 00 00 */	li r4, 0
/* 802BDE88 00287448  38 A0 00 02 */	li r5, 2
/* 802BDE8C 0028744C  48 00 04 C1 */	bl fseek
/* 802BDE90 00287450  2C 03 00 00 */	cmpwi r3, 0
/* 802BDE94 00287454  41 82 00 0C */	beq lbl_802BDEA0
/* 802BDE98 00287458  38 60 00 00 */	li r3, 0
/* 802BDE9C 0028745C  48 00 02 00 */	b lbl_802BE09C
lbl_802BDEA0:
/* 802BDEA0 00287460  80 1C 00 08 */	lwz r0, 8(r28)
/* 802BDEA4 00287464  38 60 00 01 */	li r3, 1
/* 802BDEA8 00287468  50 60 E8 04 */	rlwimi r0, r3, 0x1d, 0, 2
/* 802BDEAC 0028746C  90 1C 00 08 */	stw r0, 8(r28)
/* 802BDEB0 00287470  7F 83 E3 78 */	mr r3, r28
/* 802BDEB4 00287474  4B FF FE 15 */	bl __prep_buffer
lbl_802BDEB8:
/* 802BDEB8 00287478  80 1C 00 08 */	lwz r0, 8(r28)
/* 802BDEBC 0028747C  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 802BDEC0 00287480  28 00 00 01 */	cmplwi r0, 1
/* 802BDEC4 00287484  41 82 00 1C */	beq lbl_802BDEE0
/* 802BDEC8 00287488  38 60 00 01 */	li r3, 1
/* 802BDECC 0028748C  38 00 00 00 */	li r0, 0
/* 802BDED0 00287490  98 7C 00 0A */	stb r3, 0xa(r28)
/* 802BDED4 00287494  38 60 00 00 */	li r3, 0
/* 802BDED8 00287498  90 1C 00 28 */	stw r0, 0x28(r28)
/* 802BDEDC 0028749C  48 00 01 C0 */	b lbl_802BE09C
lbl_802BDEE0:
/* 802BDEE0 002874A0  2C 1E 00 00 */	cmpwi r30, 0
/* 802BDEE4 002874A4  3B A0 00 00 */	li r29, 0
/* 802BDEE8 002874A8  41 82 01 28 */	beq lbl_802BE010
/* 802BDEEC 002874AC  80 7C 00 1C */	lwz r3, 0x1c(r28)
/* 802BDEF0 002874B0  80 9C 00 24 */	lwz r4, 0x24(r28)
/* 802BDEF4 002874B4  7C 04 18 40 */	cmplw r4, r3
/* 802BDEF8 002874B8  40 82 00 0C */	bne lbl_802BDF04
/* 802BDEFC 002874BC  2C 1F 00 00 */	cmpwi r31, 0
/* 802BDF00 002874C0  41 82 01 10 */	beq lbl_802BE010
lbl_802BDF04:
/* 802BDF04 002874C4  80 1C 00 20 */	lwz r0, 0x20(r28)
/* 802BDF08 002874C8  7C 63 20 50 */	subf r3, r3, r4
/* 802BDF0C 002874CC  7C 03 00 50 */	subf r0, r3, r0
/* 802BDF10 002874D0  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_802BDF14:
/* 802BDF14 002874D4  80 BC 00 28 */	lwz r5, 0x28(r28)
/* 802BDF18 002874D8  3B 20 00 00 */	li r25, 0
/* 802BDF1C 002874DC  90 A1 00 08 */	stw r5, 8(r1)
/* 802BDF20 002874E0  7C 05 F0 40 */	cmplw r5, r30
/* 802BDF24 002874E4  40 81 00 0C */	ble lbl_802BDF30
/* 802BDF28 002874E8  7F C5 F3 78 */	mr r5, r30
/* 802BDF2C 002874EC  93 C1 00 08 */	stw r30, 8(r1)
lbl_802BDF30:
/* 802BDF30 002874F0  80 1C 00 04 */	lwz r0, 4(r28)
/* 802BDF34 002874F4  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 802BDF38 002874F8  28 00 00 01 */	cmplwi r0, 1
/* 802BDF3C 002874FC  40 82 00 30 */	bne lbl_802BDF6C
/* 802BDF40 00287500  2C 05 00 00 */	cmpwi r5, 0
/* 802BDF44 00287504  41 82 00 28 */	beq lbl_802BDF6C
/* 802BDF48 00287508  7F 43 D3 78 */	mr r3, r26
/* 802BDF4C 0028750C  38 80 00 0A */	li r4, 0xa
/* 802BDF50 00287510  48 00 08 B1 */	bl __memrchr
/* 802BDF54 00287514  2C 03 00 00 */	cmpwi r3, 0
/* 802BDF58 00287518  7C 79 1B 78 */	mr r25, r3
/* 802BDF5C 0028751C  41 82 00 10 */	beq lbl_802BDF6C
/* 802BDF60 00287520  38 03 00 01 */	addi r0, r3, 1
/* 802BDF64 00287524  7C BA 00 50 */	subf r5, r26, r0
/* 802BDF68 00287528  90 A1 00 08 */	stw r5, 8(r1)
lbl_802BDF6C:
/* 802BDF6C 0028752C  80 A1 00 08 */	lwz r5, 8(r1)
/* 802BDF70 00287530  2C 05 00 00 */	cmpwi r5, 0
/* 802BDF74 00287534  41 82 00 38 */	beq lbl_802BDFAC
/* 802BDF78 00287538  80 7C 00 24 */	lwz r3, 0x24(r28)
/* 802BDF7C 0028753C  7F 44 D3 78 */	mr r4, r26
/* 802BDF80 00287540  4B D4 60 81 */	bl memcpy
/* 802BDF84 00287544  80 81 00 08 */	lwz r4, 8(r1)
/* 802BDF88 00287548  80 7C 00 24 */	lwz r3, 0x24(r28)
/* 802BDF8C 0028754C  80 1C 00 28 */	lwz r0, 0x28(r28)
/* 802BDF90 00287550  7F 5A 22 14 */	add r26, r26, r4
/* 802BDF94 00287554  7C 63 22 14 */	add r3, r3, r4
/* 802BDF98 00287558  90 7C 00 24 */	stw r3, 0x24(r28)
/* 802BDF9C 0028755C  7F C4 F0 50 */	subf r30, r4, r30
/* 802BDFA0 00287560  80 61 00 08 */	lwz r3, 8(r1)
/* 802BDFA4 00287564  7C 03 00 50 */	subf r0, r3, r0
/* 802BDFA8 00287568  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_802BDFAC:
/* 802BDFAC 0028756C  80 1C 00 28 */	lwz r0, 0x28(r28)
/* 802BDFB0 00287570  2C 00 00 00 */	cmpwi r0, 0
/* 802BDFB4 00287574  41 82 00 18 */	beq lbl_802BDFCC
/* 802BDFB8 00287578  2C 19 00 00 */	cmpwi r25, 0
/* 802BDFBC 0028757C  40 82 00 10 */	bne lbl_802BDFCC
/* 802BDFC0 00287580  80 1C 00 04 */	lwz r0, 4(r28)
/* 802BDFC4 00287584  54 00 3F BF */	rlwinm. r0, r0, 7, 0x1e, 0x1f
/* 802BDFC8 00287588  40 82 00 30 */	bne lbl_802BDFF8
lbl_802BDFCC:
/* 802BDFCC 0028758C  7F 83 E3 78 */	mr r3, r28
/* 802BDFD0 00287590  38 80 00 00 */	li r4, 0
/* 802BDFD4 00287594  4B FF FD 1D */	bl __flush_buffer
/* 802BDFD8 00287598  2C 03 00 00 */	cmpwi r3, 0
/* 802BDFDC 0028759C  41 82 00 1C */	beq lbl_802BDFF8
/* 802BDFE0 002875A0  38 60 00 01 */	li r3, 1
/* 802BDFE4 002875A4  38 00 00 00 */	li r0, 0
/* 802BDFE8 002875A8  98 7C 00 0A */	stb r3, 0xa(r28)
/* 802BDFEC 002875AC  3B C0 00 00 */	li r30, 0
/* 802BDFF0 002875B0  90 1C 00 28 */	stw r0, 0x28(r28)
/* 802BDFF4 002875B4  48 00 00 1C */	b lbl_802BE010
lbl_802BDFF8:
/* 802BDFF8 002875B8  80 01 00 08 */	lwz r0, 8(r1)
/* 802BDFFC 002875BC  2C 1E 00 00 */	cmpwi r30, 0
/* 802BE000 002875C0  7F BD 02 14 */	add r29, r29, r0
/* 802BE004 002875C4  41 82 00 0C */	beq lbl_802BE010
/* 802BE008 002875C8  2C 1F 00 00 */	cmpwi r31, 0
/* 802BE00C 002875CC  40 82 FF 08 */	bne lbl_802BDF14
lbl_802BE010:
/* 802BE010 002875D0  2C 1E 00 00 */	cmpwi r30, 0
/* 802BE014 002875D4  41 82 00 6C */	beq lbl_802BE080
/* 802BE018 002875D8  2C 1F 00 00 */	cmpwi r31, 0
/* 802BE01C 002875DC  40 82 00 64 */	bne lbl_802BE080
/* 802BE020 002875E0  83 3C 00 1C */	lwz r25, 0x1c(r28)
/* 802BE024 002875E4  7C 1A F2 14 */	add r0, r26, r30
/* 802BE028 002875E8  83 FC 00 20 */	lwz r31, 0x20(r28)
/* 802BE02C 002875EC  7F 83 E3 78 */	mr r3, r28
/* 802BE030 002875F0  93 5C 00 1C */	stw r26, 0x1c(r28)
/* 802BE034 002875F4  38 81 00 08 */	addi r4, r1, 8
/* 802BE038 002875F8  93 DC 00 20 */	stw r30, 0x20(r28)
/* 802BE03C 002875FC  90 1C 00 24 */	stw r0, 0x24(r28)
/* 802BE040 00287600  4B FF FC B1 */	bl __flush_buffer
/* 802BE044 00287604  2C 03 00 00 */	cmpwi r3, 0
/* 802BE048 00287608  41 82 00 18 */	beq lbl_802BE060
/* 802BE04C 0028760C  38 60 00 01 */	li r3, 1
/* 802BE050 00287610  38 00 00 00 */	li r0, 0
/* 802BE054 00287614  98 7C 00 0A */	stb r3, 0xa(r28)
/* 802BE058 00287618  90 1C 00 28 */	stw r0, 0x28(r28)
/* 802BE05C 0028761C  48 00 00 0C */	b lbl_802BE068
lbl_802BE060:
/* 802BE060 00287620  80 01 00 08 */	lwz r0, 8(r1)
/* 802BE064 00287624  7F BD 02 14 */	add r29, r29, r0
lbl_802BE068:
/* 802BE068 00287628  93 3C 00 1C */	stw r25, 0x1c(r28)
/* 802BE06C 0028762C  7F 83 E3 78 */	mr r3, r28
/* 802BE070 00287630  93 FC 00 20 */	stw r31, 0x20(r28)
/* 802BE074 00287634  4B FF FC 55 */	bl __prep_buffer
/* 802BE078 00287638  38 00 00 00 */	li r0, 0
/* 802BE07C 0028763C  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_802BE080:
/* 802BE080 00287640  80 1C 00 04 */	lwz r0, 4(r28)
/* 802BE084 00287644  54 00 3F BE */	rlwinm r0, r0, 7, 0x1e, 0x1f
/* 802BE088 00287648  28 00 00 02 */	cmplwi r0, 2
/* 802BE08C 0028764C  41 82 00 0C */	beq lbl_802BE098
/* 802BE090 00287650  38 00 00 00 */	li r0, 0
/* 802BE094 00287654  90 1C 00 28 */	stw r0, 0x28(r28)
lbl_802BE098:
/* 802BE098 00287658  7C 7D DB 96 */	divwu r3, r29, r27
lbl_802BE09C:
/* 802BE09C 0028765C  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 802BE0A0 00287660  80 01 00 34 */	lwz r0, 0x34(r1)
/* 802BE0A4 00287664  7C 08 03 A6 */	mtlr r0
/* 802BE0A8 00287668  38 21 00 30 */	addi r1, r1, 0x30
/* 802BE0AC 0028766C  4E 80 00 20 */	blr 